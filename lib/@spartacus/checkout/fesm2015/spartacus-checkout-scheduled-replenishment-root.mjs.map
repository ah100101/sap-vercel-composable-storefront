{"version":3,"file":"spartacus-checkout-scheduled-replenishment-root.mjs","sources":["../../../feature-libs/checkout/scheduled-replenishment/root/events/checkout-scheduled-replenishment-event.listener.ts","../../../feature-libs/checkout/scheduled-replenishment/root/events/checkout-scheduled-replenishment-event.module.ts","../../../feature-libs/checkout/scheduled-replenishment/root/checkout-scheduled-replenishment-root.module.ts","../../../feature-libs/checkout/scheduled-replenishment/root/events/index.ts","../../../feature-libs/checkout/scheduled-replenishment/root/public_api.ts","../../../feature-libs/checkout/scheduled-replenishment/root/spartacus-checkout-scheduled-replenishment-root.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable, OnDestroy } from '@angular/core';\nimport { RemoveCartEvent } from '@spartacus/cart/base/root';\nimport { CheckoutQueryResetEvent } from '@spartacus/checkout/base/root';\nimport { EventService } from '@spartacus/core';\nimport { ReplenishmentOrderScheduledEvent } from '@spartacus/order/root';\nimport { Subscription } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckoutScheduledReplenishmentEventListener implements OnDestroy {\n  protected subscriptions = new Subscription();\n\n  constructor(protected eventService: EventService) {\n    this.onReplenishmentOrder();\n  }\n\n  protected onReplenishmentOrder() {\n    this.subscriptions.add(\n      this.eventService\n        .get(ReplenishmentOrderScheduledEvent)\n        .subscribe(({ userId, cartId, cartCode }) => {\n          this.eventService.dispatch(\n            {\n              userId,\n              cartId,\n              cartCode,\n            },\n            RemoveCartEvent\n          );\n\n          this.eventService.dispatch({}, CheckoutQueryResetEvent);\n        })\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\nimport { CheckoutScheduledReplenishmentEventListener } from './checkout-scheduled-replenishment-event.listener';\n\n@NgModule({})\nexport class CheckoutScheduledReplenishmentEventModule {\n  constructor(\n    _checkoutScheduledReplenishmentEventListener: CheckoutScheduledReplenishmentEventListener\n  ) {\n    // Intentional empty constructor\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\nimport { CHECKOUT_B2B_CMS_COMPONENTS } from '@spartacus/checkout/b2b/root';\nimport { CHECKOUT_FEATURE } from '@spartacus/checkout/base/root';\nimport { CmsConfig, provideDefaultConfigFactory } from '@spartacus/core';\nimport { CheckoutScheduledReplenishmentEventModule } from './events/checkout-scheduled-replenishment-event.module';\n\nexport const CHECKOUT_SCHEDULED_REPLENISHMENT_CMS_COMPONENTS: string[] = [\n  /**\n   *  TODO:#9574 - we should be able to remove the spread of `CHECKOUT_BASE_CMS_COMPONENTS`.\n   * Re-test the B2B checkout flow after doing it.\n   */\n  ...CHECKOUT_B2B_CMS_COMPONENTS,\n  'CheckoutScheduleReplenishmentOrder',\n];\n\nexport function defaultCheckoutComponentsConfig() {\n  const config: CmsConfig = {\n    featureModules: {\n      [CHECKOUT_FEATURE]: {\n        cmsComponents: CHECKOUT_SCHEDULED_REPLENISHMENT_CMS_COMPONENTS,\n      },\n    },\n  };\n  return config;\n}\n\n@NgModule({\n  imports: [CheckoutScheduledReplenishmentEventModule],\n  providers: [provideDefaultConfigFactory(defaultCheckoutComponentsConfig)],\n})\nexport class CheckoutScheduledReplenishmentRootModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './checkout-scheduled-replenishment-event.listener';\nexport * from './checkout-scheduled-replenishment-event.module';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './checkout-scheduled-replenishment-root.module';\nexport * from './events/index';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1.CheckoutScheduledReplenishmentEventListener"],"mappings":"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"}