/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { InjectionToken } from '@angular/core';
import { STORE_FINDER_DATA } from '../store-finder-state';
import { SiteContextActions, StateUtils } from '@spartacus/core';
import { StoreFinderActions } from '../actions';
import { findStoresReducer } from './find-stores.reducer';
import { viewAllStoresReducer } from './view-all-stores.reducer';
export function getReducers() {
    return {
        findStores: StateUtils.loaderReducer(STORE_FINDER_DATA, findStoresReducer),
        viewAllStores: StateUtils.loaderReducer(STORE_FINDER_DATA, viewAllStoresReducer),
    };
}
export const reducerToken = new InjectionToken('StoreFinderReducers');
export const reducerProvider = {
    provide: reducerToken,
    useFactory: getReducers,
};
export function clearStoreFinderState(reducer) {
    return function (state, action) {
        if (action.type === SiteContextActions.LANGUAGE_CHANGE) {
            state = undefined;
        }
        if (action.type === StoreFinderActions.CLEAR_STORE_FINDER_DATA) {
            state = undefined;
        }
        return reducer(state, action);
    };
}
export const metaReducers = [clearStoreFinderState];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvc3RvcmVmaW5kZXIvY29yZS9zdG9yZS9yZWR1Y2Vycy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBU0gsT0FBTyxFQUFFLGNBQWMsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQUN6RCxPQUFPLEVBQWUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUN2RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsVUFBVSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDakUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQ2hELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzFELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRWpFLE1BQU0sVUFBVSxXQUFXO0lBQ3pCLE9BQU87UUFDTCxVQUFVLEVBQUUsVUFBVSxDQUFDLGFBQWEsQ0FBQyxpQkFBaUIsRUFBRSxpQkFBaUIsQ0FBQztRQUMxRSxhQUFhLEVBQUUsVUFBVSxDQUFDLGFBQWEsQ0FDckMsaUJBQWlCLEVBQ2pCLG9CQUFvQixDQUNyQjtLQUNGLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUN2QixJQUFJLGNBQWMsQ0FBZ0MscUJBQXFCLENBQUMsQ0FBQztBQUUzRSxNQUFNLENBQUMsTUFBTSxlQUFlLEdBQWE7SUFDdkMsT0FBTyxFQUFFLFlBQVk7SUFDckIsVUFBVSxFQUFFLFdBQVc7Q0FDeEIsQ0FBQztBQUVGLE1BQU0sVUFBVSxxQkFBcUIsQ0FDbkMsT0FBMkM7SUFFM0MsT0FBTyxVQUFVLEtBQUssRUFBRSxNQUFNO1FBQzVCLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxrQkFBa0IsQ0FBQyxlQUFlLEVBQUU7WUFDdEQsS0FBSyxHQUFHLFNBQVMsQ0FBQztTQUNuQjtRQUNELElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxrQkFBa0IsQ0FBQyx1QkFBdUIsRUFBRTtZQUM5RCxLQUFLLEdBQUcsU0FBUyxDQUFDO1NBQ25CO1FBQ0QsT0FBTyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQXVCLENBQUMscUJBQXFCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7XG4gIEFjdGlvbixcbiAgQWN0aW9uUmVkdWNlcixcbiAgQWN0aW9uUmVkdWNlck1hcCxcbiAgTWV0YVJlZHVjZXIsXG59IGZyb20gJ0BuZ3J4L3N0b3JlJztcblxuaW1wb3J0IHsgSW5qZWN0aW9uVG9rZW4sIFByb3ZpZGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdG9yZXNTdGF0ZSwgU1RPUkVfRklOREVSX0RBVEEgfSBmcm9tICcuLi9zdG9yZS1maW5kZXItc3RhdGUnO1xuaW1wb3J0IHsgU2l0ZUNvbnRleHRBY3Rpb25zLCBTdGF0ZVV0aWxzIH0gZnJvbSAnQHNwYXJ0YWN1cy9jb3JlJztcbmltcG9ydCB7IFN0b3JlRmluZGVyQWN0aW9ucyB9IGZyb20gJy4uL2FjdGlvbnMnO1xuaW1wb3J0IHsgZmluZFN0b3Jlc1JlZHVjZXIgfSBmcm9tICcuL2ZpbmQtc3RvcmVzLnJlZHVjZXInO1xuaW1wb3J0IHsgdmlld0FsbFN0b3Jlc1JlZHVjZXIgfSBmcm9tICcuL3ZpZXctYWxsLXN0b3Jlcy5yZWR1Y2VyJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZHVjZXJzKCk6IEFjdGlvblJlZHVjZXJNYXA8U3RvcmVzU3RhdGU+IHtcbiAgcmV0dXJuIHtcbiAgICBmaW5kU3RvcmVzOiBTdGF0ZVV0aWxzLmxvYWRlclJlZHVjZXIoU1RPUkVfRklOREVSX0RBVEEsIGZpbmRTdG9yZXNSZWR1Y2VyKSxcbiAgICB2aWV3QWxsU3RvcmVzOiBTdGF0ZVV0aWxzLmxvYWRlclJlZHVjZXIoXG4gICAgICBTVE9SRV9GSU5ERVJfREFUQSxcbiAgICAgIHZpZXdBbGxTdG9yZXNSZWR1Y2VyXG4gICAgKSxcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IHJlZHVjZXJUb2tlbjogSW5qZWN0aW9uVG9rZW48QWN0aW9uUmVkdWNlck1hcDxTdG9yZXNTdGF0ZT4+ID1cbiAgbmV3IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8U3RvcmVzU3RhdGU+PignU3RvcmVGaW5kZXJSZWR1Y2VycycpO1xuXG5leHBvcnQgY29uc3QgcmVkdWNlclByb3ZpZGVyOiBQcm92aWRlciA9IHtcbiAgcHJvdmlkZTogcmVkdWNlclRva2VuLFxuICB1c2VGYWN0b3J5OiBnZXRSZWR1Y2Vycyxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclN0b3JlRmluZGVyU3RhdGUoXG4gIHJlZHVjZXI6IEFjdGlvblJlZHVjZXI8U3RvcmVzU3RhdGUsIEFjdGlvbj5cbik6IEFjdGlvblJlZHVjZXI8U3RvcmVzU3RhdGUsIEFjdGlvbj4ge1xuICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICBpZiAoYWN0aW9uLnR5cGUgPT09IFNpdGVDb250ZXh0QWN0aW9ucy5MQU5HVUFHRV9DSEFOR0UpIHtcbiAgICAgIHN0YXRlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoYWN0aW9uLnR5cGUgPT09IFN0b3JlRmluZGVyQWN0aW9ucy5DTEVBUl9TVE9SRV9GSU5ERVJfREFUQSkge1xuICAgICAgc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiByZWR1Y2VyKHN0YXRlLCBhY3Rpb24pO1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgbWV0YVJlZHVjZXJzOiBNZXRhUmVkdWNlcjxhbnk+W10gPSBbY2xlYXJTdG9yZUZpbmRlclN0YXRlXTtcbiJdfQ==