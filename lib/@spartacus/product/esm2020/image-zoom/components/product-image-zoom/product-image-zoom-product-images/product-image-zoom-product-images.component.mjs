/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { ProductImagesComponent, } from '@spartacus/storefront';
import * as i0 from "@angular/core";
import * as i1 from "@spartacus/storefront";
import * as i2 from "@angular/common";
import * as i3 from "../product-image-zoom-trigger/product-image-zoom-trigger.component";
import * as i4 from "@spartacus/core";
export class ProductImageZoomProductImagesComponent extends ProductImagesComponent {
    constructor(currentProductService) {
        super(currentProductService);
        this.currentProductService = currentProductService;
        this.expandImage = new BehaviorSubject(false);
        this.product$ = this.product$;
    }
    openImage(item) {
        this.mainMediaContainer.next(item);
        this.selectedIndex = this.mainMediaContainer.value?.zoom?.galleryIndex;
    }
    /**
     * Opens image zoom dialog.
     */
    triggerZoom(value) {
        this.expandImage.next(value);
    }
}
ProductImageZoomProductImagesComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: ProductImageZoomProductImagesComponent, deps: [{ token: i1.CurrentProductService }], target: i0.ɵɵFactoryTarget.Component });
ProductImageZoomProductImagesComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.4", type: ProductImageZoomProductImagesComponent, selector: "cx-product-images", usesInheritance: true, ngImport: i0, template: "<ng-container *ngIf=\"mainImage$ | async as main\">\n  <cx-media [container]=\"main\" (click)=\"triggerZoom(true)\"></cx-media>\n  <cx-product-image-zoom-trigger\n    [expandImage]=\"expandImage.value\"\n    [galleryIndex]=\"selectedIndex\"\n    (dialogClose)=\"triggerZoom(false)\"\n  ></cx-product-image-zoom-trigger>\n</ng-container>\n\n<ng-container *ngIf=\"thumbs$ | async as thumbs\">\n  <ng-container *ngIf=\"product$ | async as product\">\n    <cx-carousel\n      role=\"region\"\n      [attr.aria-label]=\"\n        'carousel.carouselForProduct' | cxTranslate: { product: product.name }\n      \"\n      tabindex=\"-1\"\n      *ngIf=\"thumbs.length\"\n      class=\"thumbs\"\n      [items]=\"thumbs\"\n      itemWidth=\"120px\"\n      [hideIndicators]=\"false\"\n      [template]=\"thumb\"\n    ></cx-carousel>\n  </ng-container>\n</ng-container>\n\n<ng-template #thumb let-item=\"item\">\n  <cx-media\n    [container]=\"item.container\"\n    tabindex=\"0\"\n    (focus)=\"openImage(item.container)\"\n    [class.is-active]=\"isActive(item.container) | async\"\n    format=\"product\"\n  >\n  </cx-media>\n</ng-template>\n", dependencies: [{ kind: "component", type: i1.CarouselComponent, selector: "cx-carousel", inputs: ["title", "items", "template", "itemWidth", "hideIndicators", "indicatorIcon", "previousIcon", "nextIcon"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i1.MediaComponent, selector: "cx-media", inputs: ["container", "format", "alt", "role", "loading"], outputs: ["loaded"] }, { kind: "component", type: i3.ProductImageZoomTriggerComponent, selector: "cx-product-image-zoom-trigger", inputs: ["galleryIndex", "expandImage"], outputs: ["dialogClose"] }, { kind: "pipe", type: i2.AsyncPipe, name: "async" }, { kind: "pipe", type: i4.TranslatePipe, name: "cxTranslate" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: ProductImageZoomProductImagesComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-product-images', changeDetection: ChangeDetectionStrategy.OnPush, template: "<ng-container *ngIf=\"mainImage$ | async as main\">\n  <cx-media [container]=\"main\" (click)=\"triggerZoom(true)\"></cx-media>\n  <cx-product-image-zoom-trigger\n    [expandImage]=\"expandImage.value\"\n    [galleryIndex]=\"selectedIndex\"\n    (dialogClose)=\"triggerZoom(false)\"\n  ></cx-product-image-zoom-trigger>\n</ng-container>\n\n<ng-container *ngIf=\"thumbs$ | async as thumbs\">\n  <ng-container *ngIf=\"product$ | async as product\">\n    <cx-carousel\n      role=\"region\"\n      [attr.aria-label]=\"\n        'carousel.carouselForProduct' | cxTranslate: { product: product.name }\n      \"\n      tabindex=\"-1\"\n      *ngIf=\"thumbs.length\"\n      class=\"thumbs\"\n      [items]=\"thumbs\"\n      itemWidth=\"120px\"\n      [hideIndicators]=\"false\"\n      [template]=\"thumb\"\n    ></cx-carousel>\n  </ng-container>\n</ng-container>\n\n<ng-template #thumb let-item=\"item\">\n  <cx-media\n    [container]=\"item.container\"\n    tabindex=\"0\"\n    (focus)=\"openImage(item.container)\"\n    [class.is-active]=\"isActive(item.container) | async\"\n    format=\"product\"\n  >\n  </cx-media>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: i1.CurrentProductService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdC1pbWFnZS16b29tLXByb2R1Y3QtaW1hZ2VzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2ZlYXR1cmUtbGlicy9wcm9kdWN0L2ltYWdlLXpvb20vY29tcG9uZW50cy9wcm9kdWN0LWltYWdlLXpvb20vcHJvZHVjdC1pbWFnZS16b29tLXByb2R1Y3QtaW1hZ2VzL3Byb2R1Y3QtaW1hZ2Utem9vbS1wcm9kdWN0LWltYWdlcy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvcHJvZHVjdC9pbWFnZS16b29tL2NvbXBvbmVudHMvcHJvZHVjdC1pbWFnZS16b29tL3Byb2R1Y3QtaW1hZ2Utem9vbS1wcm9kdWN0LWltYWdlcy9wcm9kdWN0LWltYWdlLXpvb20tcHJvZHVjdC1pbWFnZXMuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkUsT0FBTyxFQUFFLGVBQWUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUNuRCxPQUFPLEVBRUwsc0JBQXNCLEdBQ3ZCLE1BQU0sdUJBQXVCLENBQUM7Ozs7OztBQVEvQixNQUFNLE9BQU8sc0NBQXVDLFNBQVEsc0JBQXNCO0lBTWhGLFlBQXNCLHFCQUE0QztRQUNoRSxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQztRQURULDBCQUFxQixHQUFyQixxQkFBcUIsQ0FBdUI7UUFMbEUsZ0JBQVcsR0FBRyxJQUFJLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUd6QyxhQUFRLEdBQXdCLElBQUksQ0FBQyxRQUFRLENBQUM7SUFJOUMsQ0FBQztJQUVELFNBQVMsQ0FBQyxJQUFTO1FBQ2pCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxZQUFZLENBQUM7SUFDekUsQ0FBQztJQUVEOztPQUVHO0lBQ0gsV0FBVyxDQUFDLEtBQWM7UUFDeEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0IsQ0FBQzs7bUlBcEJVLHNDQUFzQzt1SEFBdEMsc0NBQXNDLGdGQ25CbkQsNm1DQXFDQTsyRkRsQmEsc0NBQXNDO2tCQUxsRCxTQUFTOytCQUNFLG1CQUFtQixtQkFFWix1QkFBdUIsQ0FBQyxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjMgU0FQIFNwYXJ0YWN1cyB0ZWFtIDxzcGFydGFjdXMtdGVhbUBzYXAuY29tPlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge1xuICBDdXJyZW50UHJvZHVjdFNlcnZpY2UsXG4gIFByb2R1Y3RJbWFnZXNDb21wb25lbnQsXG59IGZyb20gJ0BzcGFydGFjdXMvc3RvcmVmcm9udCc7XG5pbXBvcnQgeyBQcm9kdWN0IH0gZnJvbSAnQHNwYXJ0YWN1cy9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY3gtcHJvZHVjdC1pbWFnZXMnLFxuICB0ZW1wbGF0ZVVybDogJy4vcHJvZHVjdC1pbWFnZS16b29tLXByb2R1Y3QtaW1hZ2VzLmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG59KVxuZXhwb3J0IGNsYXNzIFByb2R1Y3RJbWFnZVpvb21Qcm9kdWN0SW1hZ2VzQ29tcG9uZW50IGV4dGVuZHMgUHJvZHVjdEltYWdlc0NvbXBvbmVudCB7XG4gIGV4cGFuZEltYWdlID0gbmV3IEJlaGF2aW9yU3ViamVjdChmYWxzZSk7XG4gIHNlbGVjdGVkSW5kZXg6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICBwcm9kdWN0JDogT2JzZXJ2YWJsZTxQcm9kdWN0PiA9IHRoaXMucHJvZHVjdCQ7XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIGN1cnJlbnRQcm9kdWN0U2VydmljZTogQ3VycmVudFByb2R1Y3RTZXJ2aWNlKSB7XG4gICAgc3VwZXIoY3VycmVudFByb2R1Y3RTZXJ2aWNlKTtcbiAgfVxuXG4gIG9wZW5JbWFnZShpdGVtOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm1haW5NZWRpYUNvbnRhaW5lci5uZXh0KGl0ZW0pO1xuICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IHRoaXMubWFpbk1lZGlhQ29udGFpbmVyLnZhbHVlPy56b29tPy5nYWxsZXJ5SW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgaW1hZ2Ugem9vbSBkaWFsb2cuXG4gICAqL1xuICB0cmlnZ2VyWm9vbSh2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuZXhwYW5kSW1hZ2UubmV4dCh2YWx1ZSk7XG4gIH1cbn1cbiIsIjxuZy1jb250YWluZXIgKm5nSWY9XCJtYWluSW1hZ2UkIHwgYXN5bmMgYXMgbWFpblwiPlxuICA8Y3gtbWVkaWEgW2NvbnRhaW5lcl09XCJtYWluXCIgKGNsaWNrKT1cInRyaWdnZXJab29tKHRydWUpXCI+PC9jeC1tZWRpYT5cbiAgPGN4LXByb2R1Y3QtaW1hZ2Utem9vbS10cmlnZ2VyXG4gICAgW2V4cGFuZEltYWdlXT1cImV4cGFuZEltYWdlLnZhbHVlXCJcbiAgICBbZ2FsbGVyeUluZGV4XT1cInNlbGVjdGVkSW5kZXhcIlxuICAgIChkaWFsb2dDbG9zZSk9XCJ0cmlnZ2VyWm9vbShmYWxzZSlcIlxuICA+PC9jeC1wcm9kdWN0LWltYWdlLXpvb20tdHJpZ2dlcj5cbjwvbmctY29udGFpbmVyPlxuXG48bmctY29udGFpbmVyICpuZ0lmPVwidGh1bWJzJCB8IGFzeW5jIGFzIHRodW1ic1wiPlxuICA8bmctY29udGFpbmVyICpuZ0lmPVwicHJvZHVjdCQgfCBhc3luYyBhcyBwcm9kdWN0XCI+XG4gICAgPGN4LWNhcm91c2VsXG4gICAgICByb2xlPVwicmVnaW9uXCJcbiAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiXG4gICAgICAgICdjYXJvdXNlbC5jYXJvdXNlbEZvclByb2R1Y3QnIHwgY3hUcmFuc2xhdGU6IHsgcHJvZHVjdDogcHJvZHVjdC5uYW1lIH1cbiAgICAgIFwiXG4gICAgICB0YWJpbmRleD1cIi0xXCJcbiAgICAgICpuZ0lmPVwidGh1bWJzLmxlbmd0aFwiXG4gICAgICBjbGFzcz1cInRodW1ic1wiXG4gICAgICBbaXRlbXNdPVwidGh1bWJzXCJcbiAgICAgIGl0ZW1XaWR0aD1cIjEyMHB4XCJcbiAgICAgIFtoaWRlSW5kaWNhdG9yc109XCJmYWxzZVwiXG4gICAgICBbdGVtcGxhdGVdPVwidGh1bWJcIlxuICAgID48L2N4LWNhcm91c2VsPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctY29udGFpbmVyPlxuXG48bmctdGVtcGxhdGUgI3RodW1iIGxldC1pdGVtPVwiaXRlbVwiPlxuICA8Y3gtbWVkaWFcbiAgICBbY29udGFpbmVyXT1cIml0ZW0uY29udGFpbmVyXCJcbiAgICB0YWJpbmRleD1cIjBcIlxuICAgIChmb2N1cyk9XCJvcGVuSW1hZ2UoaXRlbS5jb250YWluZXIpXCJcbiAgICBbY2xhc3MuaXMtYWN0aXZlXT1cImlzQWN0aXZlKGl0ZW0uY29udGFpbmVyKSB8IGFzeW5jXCJcbiAgICBmb3JtYXQ9XCJwcm9kdWN0XCJcbiAgPlxuICA8L2N4LW1lZGlhPlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==