{"version":3,"file":"spartacus-product-bulk-pricing.mjs","sources":["../../../feature-libs/product/bulk-pricing/components/bulk-pricing-table/bulk-pricing-table.component.ts","../../../feature-libs/product/bulk-pricing/components/bulk-pricing-table/bulk-pricing-table.component.html","../../../feature-libs/product/bulk-pricing/components/bulk-pricing-table/bulk-pricing-table.module.ts","../../../feature-libs/product/bulk-pricing/occ/config/default-occ-bulk-pricing-config.ts","../../../feature-libs/product/bulk-pricing/occ/bulk-pricing-occ.module.ts","../../../feature-libs/product/bulk-pricing/bulk-pricing.module.ts","../../../feature-libs/product/bulk-pricing/public_api.ts","../../../feature-libs/product/bulk-pricing/spartacus-product-bulk-pricing.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Component, OnInit } from '@angular/core';\nimport { BulkPricingService } from '@spartacus/product/bulk-pricing/core';\nimport { RoutingService } from '@spartacus/core';\nimport { BulkPrice } from '@spartacus/product/bulk-pricing/core';\nimport { Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-bulk-pricing-table',\n  templateUrl: './bulk-pricing-table.component.html',\n})\nexport class BulkPricingTableComponent implements OnInit {\n  protected readonly PRODUCT_KEY = 'productCode';\n\n  priceTiers$: Observable<BulkPrice[] | undefined>;\n\n  constructor(\n    protected routingService: RoutingService,\n    protected bulkPricingService: BulkPricingService\n  ) {}\n\n  ngOnInit() {\n    this.priceTiers$ = this.getPrices();\n  }\n\n  formatQuantity(tier: BulkPrice): string {\n    let formattedQuantityRange = '';\n    if (!tier.maxQuantity) {\n      formattedQuantityRange = tier.minQuantity + '+';\n    } else {\n      formattedQuantityRange = tier.minQuantity + ' - ' + tier.maxQuantity;\n    }\n    return formattedQuantityRange;\n  }\n\n  getPrices(): Observable<BulkPrice[] | undefined> {\n    return this.routingService.getRouterState().pipe(\n      switchMap((state) => {\n        const productCode = state.state.params[this.PRODUCT_KEY];\n        return this.bulkPricingService.getBulkPrices(productCode);\n      })\n    );\n  }\n}\n","<ng-container *ngIf=\"priceTiers$ | async as priceTiers\">\n  <div class=\"cx-bulk-pricing-table-container\" *ngIf=\"priceTiers.length > 0\">\n    <table class=\"table\">\n      <thead class=\"thead-light\">\n        <tr>\n          <th scope=\"col\">{{ 'bulkPricingTable.quantity' | cxTranslate }}</th>\n          <th scope=\"col\">{{ 'bulkPricingTable.price' | cxTranslate }}</th>\n          <th scope=\"col\">{{ 'bulkPricingTable.discount' | cxTranslate }}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let tier of priceTiers\">\n          <td>{{ formatQuantity(tier) }}</td>\n          <td>{{ tier.formattedValue }}</td>\n          <td>{{ tier.formattedDiscount }}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</ng-container>\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { CmsConfig, ConfigModule, I18nModule } from '@spartacus/core';\nimport { SpinnerModule } from '@spartacus/storefront';\nimport { BulkPricingTableComponent } from './bulk-pricing-table.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    SpinnerModule,\n    ConfigModule.withConfig(<CmsConfig>{\n      cmsComponents: {\n        BulkPricingTableComponent: {\n          component: BulkPricingTableComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [BulkPricingTableComponent],\n  exports: [BulkPricingTableComponent],\n})\nexport class BulkPricingTableModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { OccConfig } from '@spartacus/core';\n\nexport const defaultOccBulkPricingConfig: OccConfig = {\n  backend: {\n    occ: {\n      endpoints: {\n        product: {\n          bulkPrices:\n            'orgProducts/${productCode}?fields=price(DEFAULT),volumePrices(FULL)',\n        },\n      },\n    },\n  },\n};\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { defaultOccBulkPricingConfig } from './config/default-occ-bulk-pricing-config';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [provideDefaultConfig(defaultOccBulkPricingConfig)],\n})\nexport class BulkPricingOccModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\nimport { BulkPricingTableModule } from './components/bulk-pricing-table/bulk-pricing-table.module';\nimport { BulkPricingOccModule } from './occ/bulk-pricing-occ.module';\n\n@NgModule({\n  imports: [BulkPricingOccModule, BulkPricingTableModule],\n})\nexport class BulkPricingModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './bulk-pricing.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}