{"version":3,"file":"spartacus-product-future-stock-core.mjs","sources":["../../../feature-libs/product/future-stock/core/connectors/future-stock.adapter.ts","../../../feature-libs/product/future-stock/core/connectors/future-stock.connector.ts","../../../feature-libs/product/future-stock/core/connectors/converters.ts","../../../feature-libs/product/future-stock/core/connectors/index.ts","../../../feature-libs/product/future-stock/core/model/index.ts","../../../feature-libs/product/future-stock/core/services/future-stock.service.ts","../../../feature-libs/product/future-stock/core/services/index.ts","../../../feature-libs/product/future-stock/core/facade/facade-providers.ts","../../../feature-libs/product/future-stock/core/future-stock-core.module.ts","../../../feature-libs/product/future-stock/core/public_api.ts","../../../feature-libs/product/future-stock/core/spartacus-product-future-stock-core.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Observable } from 'rxjs';\nimport {\n  ProductFutureStock,\n  ProductFutureStockList,\n} from '../model/future-stock.model';\n\nexport abstract class FutureStockAdapter {\n  /**\n   * Abstract method used to get the future product availability for the specified product\n   */\n  abstract getFutureStock(\n    userId: string,\n    productCode: string\n  ): Observable<ProductFutureStock>;\n  /**\n   * Abstract method  used to get the future product availability for the list of specified products\n   * example list of products: '3318057,72399000,3228058'\n   */\n  abstract getFutureStocks(\n    userId: string,\n    productCodes: string\n  ): Observable<ProductFutureStockList>;\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport {\n  ProductFutureStock,\n  ProductFutureStockList,\n} from '../model/future-stock.model';\nimport { FutureStockAdapter } from './future-stock.adapter';\n\n@Injectable()\nexport class FutureStockConnector {\n  constructor(protected adapter: FutureStockAdapter) {}\n\n  public getFutureStock(\n    userId: string,\n    productCode: string\n  ): Observable<ProductFutureStock> {\n    return this.adapter.getFutureStock(userId, productCode);\n  }\n\n  public getFutureStocks(\n    userId: string,\n    productCodes: string\n  ): Observable<ProductFutureStockList> {\n    return this.adapter.getFutureStocks(userId, productCodes);\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { InjectionToken } from '@angular/core';\nimport { Converter } from '@spartacus/core';\nimport {\n  ProductFutureStock,\n  ProductFutureStockList,\n} from '../model/future-stock.model';\n\nexport const FUTURE_STOCK_NORMALIZER = new InjectionToken<\n  Converter<any, ProductFutureStock>\n>('FutureStockNormalizer');\n\nexport const FUTURE_STOCK_LIST_NORMALIZER = new InjectionToken<\n  Converter<any, ProductFutureStockList>\n>('FutureStockListNormalizer');\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './future-stock.adapter';\nexport * from './future-stock.connector';\nexport * from './converters';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './future-stock.model';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { FutureStockFacade } from '@spartacus/product/future-stock/root';\nimport {\n  OCC_USER_ID_ANONYMOUS,\n  RoutingService,\n  UserIdService,\n} from '@spartacus/core';\nimport { switchMap, withLatestFrom } from 'rxjs/operators';\nimport { FutureStockConnector } from '../connectors';\nimport { ProductFutureStock } from '../model';\n\n@Injectable()\nexport class FutureStockService implements FutureStockFacade {\n  protected readonly PRODUCT_KEY = 'productCode';\n\n  protected futureStockState$: Observable<ProductFutureStock | undefined> =\n    this.routingService.getRouterState().pipe(\n      withLatestFrom(this.userIdService.takeUserId()),\n      switchMap(([{ state }, userId]) => {\n        if (userId !== OCC_USER_ID_ANONYMOUS) {\n          return this.futureStockConnector.getFutureStock(\n            userId,\n            state.params[this.PRODUCT_KEY]\n          );\n        }\n        return of(undefined);\n      })\n    );\n  /**\n   * Get future stock\n   */\n  getFutureStock(): Observable<ProductFutureStock | undefined> {\n    return this.futureStockState$;\n  }\n\n  constructor(\n    protected userIdService: UserIdService,\n    protected futureStockConnector: FutureStockConnector,\n    protected routingService: RoutingService\n  ) {}\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './future-stock.service';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Provider } from '@angular/core';\nimport { FutureStockFacade } from '@spartacus/product/future-stock/root';\nimport { FutureStockService } from '../services/future-stock.service';\n\nexport const facadeProviders: Provider[] = [\n  FutureStockService,\n  {\n    provide: FutureStockFacade,\n    useExisting: FutureStockService,\n  },\n];\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { FutureStockConnector } from './connectors/future-stock.connector';\nimport { facadeProviders } from './facade/facade-providers';\n\n@NgModule({\n  providers: [...facadeProviders, FutureStockConnector],\n})\nexport class FutureStockCoreModule {\n  static forRoot(): ModuleWithProviders<FutureStockCoreModule> {\n    return {\n      ngModule: FutureStockCoreModule,\n    };\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './connectors/index';\nexport * from './model/index';\nexport * from './services/index';\nexport * from './future-stock-core.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1.FutureStockAdapter","i2.FutureStockConnector"],"mappings":"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"}