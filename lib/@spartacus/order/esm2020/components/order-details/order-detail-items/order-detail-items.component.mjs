/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { Component } from '@angular/core';
import { CartOutlets, PromotionLocation, } from '@spartacus/cart/base/root';
import { OrderOutlets, } from '@spartacus/order/root';
import { of } from 'rxjs';
import { map, tap } from 'rxjs/operators';
import { cancelledValues, completedValues, } from './order-consigned-entries/order-consigned-entries.model';
import * as i0 from "@angular/core";
import * as i1 from "../order-details.service";
import * as i2 from "@spartacus/storefront";
import * as i3 from "@angular/common";
import * as i4 from "@spartacus/cart/base/components/add-to-cart";
import * as i5 from "./order-consigned-entries/order-consigned-entries.component";
import * as i6 from "@spartacus/core";
export class OrderDetailItemsComponent {
    constructor(orderDetailsService, component) {
        this.orderDetailsService = orderDetailsService;
        this.component = component;
        this.OrderOutlets = OrderOutlets;
        this.CartOutlets = CartOutlets;
        this.promotionLocation = PromotionLocation.Order;
        this.order$ = this.orderDetailsService.getOrderDetails().pipe(tap((order) => {
            this.pickupConsignments = this.getGroupedConsignments(order, true);
            this.deliveryConsignments = this.getGroupedConsignments(order, false);
            this.pickupUnconsignedEntries = this.getUnconsignedEntries(order, true);
            this.deliveryUnConsignedEntries = this.getUnconsignedEntries(order, false);
        }));
        this.enableAddToCart$ = this.component.data$.pipe(map((data) => data.enableAddToCart));
        this.isOrderLoading$ = typeof this.orderDetailsService.isOrderDetailsLoading === 'function'
            ? this.orderDetailsService.isOrderDetailsLoading()
            : of(false);
        this.groupCartItems$ = this.component.data$.pipe(map((data) => data.groupCartItems));
    }
    getGroupedConsignments(order, pickup) {
        const consignments = pickup
            ? order.consignments?.filter((consignment) => consignment.deliveryPointOfService !== undefined)
            : order.consignments?.filter((consignment) => consignment.deliveryPointOfService === undefined);
        return this.groupConsignments(consignments);
    }
    getUnconsignedEntries(order, pickup) {
        if (order.replenishmentOrderCode) {
            return [];
        }
        return pickup
            ? order.unconsignedEntries?.filter((entry) => entry.deliveryPointOfService !== undefined)
            : order.unconsignedEntries?.filter((entry) => entry.deliveryPointOfService === undefined);
    }
    groupConsignments(consignments) {
        const grouped = consignments?.reduce((result, current) => {
            const key = this.getStatusGroupKey(current.status || '');
            result[key] = result[key] || [];
            result[key].push(current);
            return result;
        }, {});
        return grouped
            ? [...(grouped[1] || []), ...(grouped[0] || []), ...(grouped[-1] || [])]
            : undefined;
    }
    /**
     * complete: 0
     * processing: 1
     * cancel: -1
     */
    getStatusGroupKey(status) {
        if (completedValues.includes(status)) {
            return 0;
        }
        if (cancelledValues.includes(status)) {
            return -1;
        }
        return 1;
    }
}
OrderDetailItemsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: OrderDetailItemsComponent, deps: [{ token: i1.OrderDetailsService }, { token: i2.CmsComponentData }], target: i0.ɵɵFactoryTarget.Component });
OrderDetailItemsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.4", type: OrderDetailItemsComponent, selector: "cx-order-details-items", ngImport: i0, template: "<ng-container *ngIf=\"order$ | async as order\">\n  <ng-container *ngIf=\"!(isOrderLoading$ | async)\">\n    <ng-container\n      *ngIf=\"\n        order.consignments?.length ||\n        order.unconsignedEntries?.length ||\n        order.replenishmentOrderCode\n      \"\n    >\n      <cx-promotions\n        [promotions]=\"order.appliedOrderPromotions || []\"\n      ></cx-promotions>\n    </ng-container>\n\n    <!-- pickup consigned entries -->\n    <div\n      *ngIf=\"pickupConsignments?.length\"\n      class=\"cx-pickup-order-consigned-entries-header\"\n    >\n      {{ 'deliveryPointOfServiceDetails.itemsToBePickUp' | cxTranslate }}\n    </div>\n    <cx-order-consigned-entries\n      *ngIf=\"pickupConsignments\"\n      [order]=\"order\"\n      [consignments]=\"pickupConsignments\"\n      [enableAddToCart]=\"enableAddToCart$ | async\"\n      [buyItAgainTranslation]=\"'addToCart.buyItAgain' | cxTranslate\"\n    ></cx-order-consigned-entries>\n\n    <!-- delivery consignment address and delivery mode -->\n    <ng-template\n      *ngIf=\"\n        deliveryConsignments &&\n        deliveryConsignments.length > 0 &&\n        (groupCartItems$ | async)\n      \"\n      [cxOutlet]=\"OrderOutlets.CONSIGNMENT_DELIVERY_INFO\"\n      [cxOutletContext]=\"{\n        showItemList: false,\n        order: order\n      }\"\n    >\n    </ng-template>\n\n    <!-- delivery consigned entries -->\n    <cx-order-consigned-entries\n      *ngIf=\"deliveryConsignments\"\n      [order]=\"order\"\n      [consignments]=\"deliveryConsignments\"\n      [enableAddToCart]=\"enableAddToCart$ | async\"\n      [buyItAgainTranslation]=\"'addToCart.buyItAgain' | cxTranslate\"\n    ></cx-order-consigned-entries>\n\n    <!-- unconsigned entries -->\n    <ng-container *ngIf=\"order?.unconsignedEntries?.length\">\n      <div *ngIf=\"order?.statusDisplay\" class=\"cx-list-header\">\n        <div class=\"cx-list-status\">\n          {{\n            'orderDetails.statusDisplay_' + order?.statusDisplay | cxTranslate\n          }}\n        </div>\n      </div>\n      <!-- delivery unconsigned entries -->\n      <ng-container *ngIf=\"deliveryUnConsignedEntries?.length\">\n        <h2 *ngIf=\"groupCartItems$ | async\" class=\"cx-review-header\">\n          {{ 'checkoutMode.deliveryEntries' | cxTranslate }}\n        </h2>\n        <div class=\"cx-list-item\">\n          <ng-template\n            [cxOutlet]=\"CartOutlets.CART_ITEM_LIST\"\n            [cxOutletContext]=\"{\n              items: deliveryUnConsignedEntries,\n              readonly: true,\n              promotionLocation: promotionLocation,\n              options: {\n                displayAddToCart: enableAddToCart$ | async,\n                addToCartString: 'addToCart.buyItAgain' | cxTranslate,\n                optionalBtn: addToCartBtn\n              }\n            }\"\n          >\n          </ng-template>\n        </div>\n      </ng-container>\n      <!-- pickup unconsigned entries, b2b does not have pickup items -->\n      <ng-container *ngIf=\"pickupUnconsignedEntries?.length\">\n        <h2 class=\"cx-review-header\">\n          {{ 'checkoutPickupInStore.heading' | cxTranslate }}\n        </h2>\n        <div class=\"cx-list-item\">\n          <ng-template\n            [cxOutlet]=\"CartOutlets.CART_ITEM_LIST\"\n            [cxOutletContext]=\"{\n              items: pickupUnconsignedEntries,\n              readonly: true,\n              promotionLocation: promotionLocation,\n              options: {\n                displayAddToCart: enableAddToCart$ | async,\n                addToCartString: 'addToCart.buyItAgain' | cxTranslate,\n                optionalBtn: addToCartBtn\n              }\n            }\"\n          >\n          </ng-template>\n        </div>\n      </ng-container>\n    </ng-container>\n\n    <!-- replenishment other entries -->\n    <ng-container *ngIf=\"order?.entries && order?.replenishmentOrderCode\">\n      <div class=\"cx-list\">\n        <div *ngIf=\"order?.statusDisplay\" class=\"cx-list-header\">\n          <div class=\"cx-list-status\">\n            {{\n              'orderDetails.statusDisplay_' + order?.statusDisplay | cxTranslate\n            }}\n          </div>\n        </div>\n        <div class=\"cx-list-item\">\n          <ng-template\n            [cxOutlet]=\"CartOutlets.CART_ITEM_LIST\"\n            [cxOutletContext]=\"{\n              items: order.entries,\n              readonly: true,\n              promotionLocation: promotionLocation,\n              options: {\n                displayAddToCart: enableAddToCart$ | async,\n                addToCartString: 'addToCart.buyItAgain' | cxTranslate,\n                optionalBtn: addToCartBtn\n              }\n            }\"\n          >\n          </ng-template>\n        </div>\n      </div>\n    </ng-container>\n  </ng-container>\n\n  <ng-template let-ctx #addToCartBtn>\n    <cx-add-to-cart\n      [productCode]=\"ctx.item.product?.code\"\n      [product]=\"ctx.item.product\"\n      [showQuantity]=\"false\"\n      [options]=\"ctx.options\"\n      [pickupStore]=\"ctx.item.deliveryPointOfService?.name\"\n      class=\"add-to-cart\"\n    >\n    </cx-add-to-cart>\n  </ng-template>\n</ng-container>\n", dependencies: [{ kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i2.PromotionsComponent, selector: "cx-promotions", inputs: ["promotions"] }, { kind: "directive", type: i2.OutletDirective, selector: "[cxOutlet]", inputs: ["cxOutlet", "cxOutletContext", "cxOutletDefer", "cxComponentRef"], outputs: ["loaded", "cxComponentRefChange"] }, { kind: "component", type: i4.AddToCartComponent, selector: "cx-add-to-cart", inputs: ["productCode", "showQuantity", "options", "pickupStore", "product"] }, { kind: "component", type: i5.OrderConsignedEntriesComponent, selector: "cx-order-consigned-entries", inputs: ["consignments", "order", "enableAddToCart", "buyItAgainTranslation"] }, { kind: "pipe", type: i3.AsyncPipe, name: "async" }, { kind: "pipe", type: i6.TranslatePipe, name: "cxTranslate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: OrderDetailItemsComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-order-details-items', template: "<ng-container *ngIf=\"order$ | async as order\">\n  <ng-container *ngIf=\"!(isOrderLoading$ | async)\">\n    <ng-container\n      *ngIf=\"\n        order.consignments?.length ||\n        order.unconsignedEntries?.length ||\n        order.replenishmentOrderCode\n      \"\n    >\n      <cx-promotions\n        [promotions]=\"order.appliedOrderPromotions || []\"\n      ></cx-promotions>\n    </ng-container>\n\n    <!-- pickup consigned entries -->\n    <div\n      *ngIf=\"pickupConsignments?.length\"\n      class=\"cx-pickup-order-consigned-entries-header\"\n    >\n      {{ 'deliveryPointOfServiceDetails.itemsToBePickUp' | cxTranslate }}\n    </div>\n    <cx-order-consigned-entries\n      *ngIf=\"pickupConsignments\"\n      [order]=\"order\"\n      [consignments]=\"pickupConsignments\"\n      [enableAddToCart]=\"enableAddToCart$ | async\"\n      [buyItAgainTranslation]=\"'addToCart.buyItAgain' | cxTranslate\"\n    ></cx-order-consigned-entries>\n\n    <!-- delivery consignment address and delivery mode -->\n    <ng-template\n      *ngIf=\"\n        deliveryConsignments &&\n        deliveryConsignments.length > 0 &&\n        (groupCartItems$ | async)\n      \"\n      [cxOutlet]=\"OrderOutlets.CONSIGNMENT_DELIVERY_INFO\"\n      [cxOutletContext]=\"{\n        showItemList: false,\n        order: order\n      }\"\n    >\n    </ng-template>\n\n    <!-- delivery consigned entries -->\n    <cx-order-consigned-entries\n      *ngIf=\"deliveryConsignments\"\n      [order]=\"order\"\n      [consignments]=\"deliveryConsignments\"\n      [enableAddToCart]=\"enableAddToCart$ | async\"\n      [buyItAgainTranslation]=\"'addToCart.buyItAgain' | cxTranslate\"\n    ></cx-order-consigned-entries>\n\n    <!-- unconsigned entries -->\n    <ng-container *ngIf=\"order?.unconsignedEntries?.length\">\n      <div *ngIf=\"order?.statusDisplay\" class=\"cx-list-header\">\n        <div class=\"cx-list-status\">\n          {{\n            'orderDetails.statusDisplay_' + order?.statusDisplay | cxTranslate\n          }}\n        </div>\n      </div>\n      <!-- delivery unconsigned entries -->\n      <ng-container *ngIf=\"deliveryUnConsignedEntries?.length\">\n        <h2 *ngIf=\"groupCartItems$ | async\" class=\"cx-review-header\">\n          {{ 'checkoutMode.deliveryEntries' | cxTranslate }}\n        </h2>\n        <div class=\"cx-list-item\">\n          <ng-template\n            [cxOutlet]=\"CartOutlets.CART_ITEM_LIST\"\n            [cxOutletContext]=\"{\n              items: deliveryUnConsignedEntries,\n              readonly: true,\n              promotionLocation: promotionLocation,\n              options: {\n                displayAddToCart: enableAddToCart$ | async,\n                addToCartString: 'addToCart.buyItAgain' | cxTranslate,\n                optionalBtn: addToCartBtn\n              }\n            }\"\n          >\n          </ng-template>\n        </div>\n      </ng-container>\n      <!-- pickup unconsigned entries, b2b does not have pickup items -->\n      <ng-container *ngIf=\"pickupUnconsignedEntries?.length\">\n        <h2 class=\"cx-review-header\">\n          {{ 'checkoutPickupInStore.heading' | cxTranslate }}\n        </h2>\n        <div class=\"cx-list-item\">\n          <ng-template\n            [cxOutlet]=\"CartOutlets.CART_ITEM_LIST\"\n            [cxOutletContext]=\"{\n              items: pickupUnconsignedEntries,\n              readonly: true,\n              promotionLocation: promotionLocation,\n              options: {\n                displayAddToCart: enableAddToCart$ | async,\n                addToCartString: 'addToCart.buyItAgain' | cxTranslate,\n                optionalBtn: addToCartBtn\n              }\n            }\"\n          >\n          </ng-template>\n        </div>\n      </ng-container>\n    </ng-container>\n\n    <!-- replenishment other entries -->\n    <ng-container *ngIf=\"order?.entries && order?.replenishmentOrderCode\">\n      <div class=\"cx-list\">\n        <div *ngIf=\"order?.statusDisplay\" class=\"cx-list-header\">\n          <div class=\"cx-list-status\">\n            {{\n              'orderDetails.statusDisplay_' + order?.statusDisplay | cxTranslate\n            }}\n          </div>\n        </div>\n        <div class=\"cx-list-item\">\n          <ng-template\n            [cxOutlet]=\"CartOutlets.CART_ITEM_LIST\"\n            [cxOutletContext]=\"{\n              items: order.entries,\n              readonly: true,\n              promotionLocation: promotionLocation,\n              options: {\n                displayAddToCart: enableAddToCart$ | async,\n                addToCartString: 'addToCart.buyItAgain' | cxTranslate,\n                optionalBtn: addToCartBtn\n              }\n            }\"\n          >\n          </ng-template>\n        </div>\n      </div>\n    </ng-container>\n  </ng-container>\n\n  <ng-template let-ctx #addToCartBtn>\n    <cx-add-to-cart\n      [productCode]=\"ctx.item.product?.code\"\n      [product]=\"ctx.item.product\"\n      [showQuantity]=\"false\"\n      [options]=\"ctx.options\"\n      [pickupStore]=\"ctx.item.deliveryPointOfService?.name\"\n      class=\"add-to-cart\"\n    >\n    </cx-add-to-cart>\n  </ng-template>\n</ng-container>\n" }]
        }], ctorParameters: function () { return [{ type: i1.OrderDetailsService }, { type: i2.CmsComponentData }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXItZGV0YWlsLWl0ZW1zLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2ZlYXR1cmUtbGlicy9vcmRlci9jb21wb25lbnRzL29yZGVyLWRldGFpbHMvb3JkZXItZGV0YWlsLWl0ZW1zL29yZGVyLWRldGFpbC1pdGVtcy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JkZXIvY29tcG9uZW50cy9vcmRlci1kZXRhaWxzL29yZGVyLWRldGFpbC1pdGVtcy9vcmRlci1kZXRhaWwtaXRlbXMuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMUMsT0FBTyxFQUNMLFdBQVcsRUFFWCxpQkFBaUIsR0FDbEIsTUFBTSwyQkFBMkIsQ0FBQztBQUVuQyxPQUFPLEVBR0wsWUFBWSxHQUViLE1BQU0sdUJBQXVCLENBQUM7QUFFL0IsT0FBTyxFQUFjLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN0QyxPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTFDLE9BQU8sRUFDTCxlQUFlLEVBQ2YsZUFBZSxHQUNoQixNQUFNLHlEQUF5RCxDQUFDOzs7Ozs7OztBQU1qRSxNQUFNLE9BQU8seUJBQXlCO0lBc0NwQyxZQUNZLG1CQUF3QyxFQUN4QyxTQUF5RDtRQUR6RCx3QkFBbUIsR0FBbkIsbUJBQW1CLENBQXFCO1FBQ3hDLGNBQVMsR0FBVCxTQUFTLENBQWdEO1FBdkM1RCxpQkFBWSxHQUFHLFlBQVksQ0FBQztRQUM1QixnQkFBVyxHQUFHLFdBQVcsQ0FBQztRQUVuQyxzQkFBaUIsR0FBc0IsaUJBQWlCLENBQUMsS0FBSyxDQUFDO1FBUS9ELFdBQU0sR0FBc0IsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGVBQWUsRUFB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QyxPQUFPLE9BQU87WUFDWixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBQ3hFLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDaEIsQ0FBQztJQUVEOzs7O09BSUc7SUFDSyxpQkFBaUIsQ0FBQyxNQUFjO1FBQ3RDLElBQUksZUFBZSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNwQyxPQUFPLENBQUMsQ0FBQztTQUNWO1FBQ0QsSUFBSSxlQUFlLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ3BDLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FDWDtRQUNELE9BQU8sQ0FBQyxDQUFDO0lBQ1gsQ0FBQzs7c0hBdEdVLHlCQUF5QjswR0FBekIseUJBQXlCLDhEQ2hDdEMsNGtLQXNKQTsyRkR0SGEseUJBQXlCO2tCQUpyQyxTQUFTOytCQUNFLHdCQUF3QiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgQ2FydE91dGxldHMsXG4gIE9yZGVyRW50cnksXG4gIFByb21vdGlvbkxvY2F0aW9uLFxufSBmcm9tICdAc3BhcnRhY3VzL2NhcnQvYmFzZS9yb290JztcbmltcG9ydCB7IENtc09yZGVyRGV0YWlsSXRlbXNDb21wb25lbnQgfSBmcm9tICdAc3BhcnRhY3VzL2NvcmUnO1xuaW1wb3J0IHtcbiAgQ29uc2lnbm1lbnQsXG4gIE9yZGVyLFxuICBPcmRlck91dGxldHMsXG4gIFJlcGxlbmlzaG1lbnRPcmRlcixcbn0gZnJvbSAnQHNwYXJ0YWN1cy9vcmRlci9yb290JztcbmltcG9ydCB7IENtc0NvbXBvbmVudERhdGEgfSBmcm9tICdAc3BhcnRhY3VzL3N0b3JlZnJvbnQnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgT3JkZXJEZXRhaWxzU2VydmljZSB9IGZyb20gJy4uL29yZGVyLWRldGFpbHMuc2VydmljZSc7XG5pbXBvcnQge1xuICBjYW5jZWxsZWRWYWx1ZXMsXG4gIGNvbXBsZXRlZFZhbHVlcyxcbn0gZnJvbSAnLi9vcmRlci1jb25zaWduZWQtZW50cmllcy9vcmRlci1jb25zaWduZWQtZW50cmllcy5tb2RlbCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2N4LW9yZGVyLWRldGFpbHMtaXRlbXMnLFxuICB0ZW1wbGF0ZVVybDogJy4vb3JkZXItZGV0YWlsLWl0ZW1zLmNvbXBvbmVudC5odG1sJyxcbn0pXG5leHBvcnQgY2xhc3MgT3JkZXJEZXRhaWxJdGVtc0NvbXBvbmVudCB7XG4gIHJlYWRvbmx5IE9yZGVyT3V0bGV0cyA9IE9yZGVyT3V0bGV0cztcbiAgcmVhZG9ubHkgQ2FydE91dGxldHMgPSBDYXJ0T3V0bGV0cztcblxuICBwcm9tb3Rpb25Mb2NhdGlvbjogUHJvbW90aW9uTG9jYXRpb24gPSBQcm9tb3Rpb25Mb2NhdGlvbi5PcmRlcjtcblxuICBwaWNrdXBDb25zaWdubWVudHM6IENvbnNpZ25tZW50W10gfCB1bmRlZmluZWQ7XG4gIGRlbGl2ZXJ5Q29uc2lnbm1lbnRzOiBDb25zaWdubWVudFtdIHwgdW5kZWZpbmVkO1xuXG4gIHBpY2t1cFVuY29uc2lnbmVkRW50cmllczogT3JkZXJFbnRyeVtdIHwgdW5kZWZpbmVkO1xuICBkZWxpdmVyeVVuQ29uc2lnbmVkRW50cmllczogT3JkZXJFbnRyeVtdIHwgdW5kZWZpbmVkO1xuXG4gIG9yZGVyJDogT2JzZXJ2YWJsZTxPcmRlcj4gPSB0aGlzLm9yZGVyRGV0YWlsc1NlcnZpY2UuZ2V0T3JkZXJEZXRhaWxzKCkucGlwZShcbiAgICB0YXAoKG9yZGVyKSA9PiB7XG4gICAgICB0aGlzLnBpY2t1cENvbnNpZ25tZW50cyA9IHRoaXMuZ2V0R3JvdXBlZENvbnNpZ25tZW50cyhvcmRlciwgdHJ1ZSk7XG4gICAgICB0aGlzLmRlbGl2ZXJ5Q29uc2lnbm1lbnRzID0gdGhpcy5nZXRHcm91cGVkQ29uc2lnbm1lbnRzKG9yZGVyLCBmYWxzZSk7XG5cbiAgICAgIHRoaXMucGlja3VwVW5jb25zaWduZWRFbnRyaWVzID0gdGhpcy5nZXRVbmNvbnNpZ25lZEVudHJpZXMob3JkZXIsIHRydWUpO1xuICAgICAgdGhpcy5kZWxpdmVyeVVuQ29uc2lnbmVkRW50cmllcyA9IHRoaXMuZ2V0VW5jb25zaWduZWRFbnRyaWVzKFxuICAgICAgICBvcmRlcixcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfSlcbiAgKTtcblxuICBlbmFibGVBZGRUb0NhcnQkOiBPYnNlcnZhYmxlPGJvb2xlYW4gfCB1bmRlZmluZWQ+ID0gdGhpcy5jb21wb25lbnQuZGF0YSQucGlwZShcbiAgICBtYXAoKGRhdGEpID0+IGRhdGEuZW5hYmxlQWRkVG9DYXJ0KVxuICApO1xuXG4gIGlzT3JkZXJMb2FkaW5nJDogT2JzZXJ2YWJsZTxib29sZWFuPiA9XG4gICAgdHlwZW9mIHRoaXMub3JkZXJEZXRhaWxzU2VydmljZS5pc09yZGVyRGV0YWlsc0xvYWRpbmcgPT09ICdmdW5jdGlvbidcbiAgICAgID8gdGhpcy5vcmRlckRldGFpbHNTZXJ2aWNlLmlzT3JkZXJEZXRhaWxzTG9hZGluZygpXG4gICAgICA6IG9mKGZhbHNlKTtcblxuICBncm91cENhcnRJdGVtcyQ6IE9ic2VydmFibGU8Ym9vbGVhbiB8IHVuZGVmaW5lZD4gPSB0aGlzLmNvbXBvbmVudC5kYXRhJC5waXBlKFxuICAgIG1hcCgoZGF0YSkgPT4gZGF0YS5ncm91cENhcnRJdGVtcylcbiAgKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgb3JkZXJEZXRhaWxzU2VydmljZTogT3JkZXJEZXRhaWxzU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgY29tcG9uZW50OiBDbXNDb21wb25lbnREYXRhPENtc09yZGVyRGV0YWlsSXRlbXNDb21wb25lbnQ+XG4gICkge31cblxuICBwcm90ZWN0ZWQgZ2V0R3JvdXBlZENvbnNpZ25tZW50cyhcbiAgICBvcmRlcjogT3JkZXIsXG4gICAgcGlja3VwOiBib29sZWFuXG4gICk6IENvbnNpZ25tZW50W10gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGNvbnNpZ25tZW50cyA9IHBpY2t1cFxuICAgICAgPyBvcmRlci5jb25zaWdubWVudHM/LmZpbHRlcihcbiAgICAgICAgICAoY29uc2lnbm1lbnQpID0+IGNvbnNpZ25tZW50LmRlbGl2ZXJ5UG9pbnRPZlNlcnZpY2UgIT09IHVuZGVmaW5lZFxuICAgICAgICApXG4gICAgICA6IG9yZGVyLmNvbnNpZ25tZW50cz8uZmlsdGVyKFxuICAgICAgICAgIChjb25zaWdubWVudCkgPT4gY29uc2lnbm1lbnQuZGVsaXZlcnlQb2ludE9mU2VydmljZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICk7XG5cbiAgICByZXR1cm4gdGhpcy5ncm91cENvbnNpZ25tZW50cyhjb25zaWdubWVudHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldFVuY29uc2lnbmVkRW50cmllcyhcbiAgICBvcmRlcjogT3JkZXIsXG4gICAgcGlja3VwOiBib29sZWFuXG4gICk6IE9yZGVyRW50cnlbXSB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKChvcmRlciBhcyBSZXBsZW5pc2htZW50T3JkZXIpLnJlcGxlbmlzaG1lbnRPcmRlckNvZGUpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIHBpY2t1cFxuICAgICAgPyBvcmRlci51bmNvbnNpZ25lZEVudHJpZXM/LmZpbHRlcihcbiAgICAgICAgICAoZW50cnkpID0+IGVudHJ5LmRlbGl2ZXJ5UG9pbnRPZlNlcnZpY2UgIT09IHVuZGVmaW5lZFxuICAgICAgICApXG4gICAgICA6IG9yZGVyLnVuY29uc2lnbmVkRW50cmllcz8uZmlsdGVyKFxuICAgICAgICAgIChlbnRyeSkgPT4gZW50cnkuZGVsaXZlcnlQb2ludE9mU2VydmljZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ3JvdXBDb25zaWdubWVudHMoXG4gICAgY29uc2lnbm1lbnRzOiBDb25zaWdubWVudFtdIHwgdW5kZWZpbmVkXG4gICk6IENvbnNpZ25tZW50W10gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBjb25zaWdubWVudHM/LnJlZHVjZSgocmVzdWx0LCBjdXJyZW50KSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSB0aGlzLmdldFN0YXR1c0dyb3VwS2V5KGN1cnJlbnQuc3RhdHVzIHx8ICcnKTtcbiAgICAgIHJlc3VsdFtrZXldID0gcmVzdWx0W2tleV0gfHwgW107XG4gICAgICByZXN1bHRba2V5XS5wdXNoKGN1cnJlbnQpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCB7fSBhcyB7IFtrZXk6IHN0cmluZ106IENvbnNpZ25tZW50W10gfSk7XG5cbiAgICByZXR1cm4gZ3JvdXBlZFxuICAgICAgPyBbLi4uKGdyb3VwZWRbMV0gfHwgW10pLCAuLi4oZ3JvdXBlZFswXSB8fCBbXSksIC4uLihncm91cGVkWy0xXSB8fCBbXSldXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBjb21wbGV0ZTogMFxuICAgKiBwcm9jZXNzaW5nOiAxXG4gICAqIGNhbmNlbDogLTFcbiAgICovXG4gIHByaXZhdGUgZ2V0U3RhdHVzR3JvdXBLZXkoc3RhdHVzOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGlmIChjb21wbGV0ZWRWYWx1ZXMuaW5jbHVkZXMoc3RhdHVzKSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGlmIChjYW5jZWxsZWRWYWx1ZXMuaW5jbHVkZXMoc3RhdHVzKSkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICByZXR1cm4gMTtcbiAgfVxufVxuIiwiPG5nLWNvbnRhaW5lciAqbmdJZj1cIm9yZGVyJCB8IGFzeW5jIGFzIG9yZGVyXCI+XG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCIhKGlzT3JkZXJMb2FkaW5nJCB8IGFzeW5jKVwiPlxuICAgIDxuZy1jb250YWluZXJcbiAgICAgICpuZ0lmPVwiXG4gICAgICAgIG9yZGVyLmNvbnNpZ25tZW50cz8ubGVuZ3RoIHx8XG4gICAgICAgIG9yZGVyLnVuY29uc2lnbmVkRW50cmllcz8ubGVuZ3RoIHx8XG4gICAgICAgIG9yZGVyLnJlcGxlbmlzaG1lbnRPcmRlckNvZGVcbiAgICAgIFwiXG4gICAgPlxuICAgICAgPGN4LXByb21vdGlvbnNcbiAgICAgICAgW3Byb21vdGlvbnNdPVwib3JkZXIuYXBwbGllZE9yZGVyUHJvbW90aW9ucyB8fCBbXVwiXG4gICAgICA+PC9jeC1wcm9tb3Rpb25zPlxuICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgPCEtLSBwaWNrdXAgY29uc2lnbmVkIGVudHJpZXMgLS0+XG4gICAgPGRpdlxuICAgICAgKm5nSWY9XCJwaWNrdXBDb25zaWdubWVudHM/Lmxlbmd0aFwiXG4gICAgICBjbGFzcz1cImN4LXBpY2t1cC1vcmRlci1jb25zaWduZWQtZW50cmllcy1oZWFkZXJcIlxuICAgID5cbiAgICAgIHt7ICdkZWxpdmVyeVBvaW50T2ZTZXJ2aWNlRGV0YWlscy5pdGVtc1RvQmVQaWNrVXAnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICA8L2Rpdj5cbiAgICA8Y3gtb3JkZXItY29uc2lnbmVkLWVudHJpZXNcbiAgICAgICpuZ0lmPVwicGlja3VwQ29uc2lnbm1lbnRzXCJcbiAgICAgIFtvcmRlcl09XCJvcmRlclwiXG4gICAgICBbY29uc2lnbm1lbnRzXT1cInBpY2t1cENvbnNpZ25tZW50c1wiXG4gICAgICBbZW5hYmxlQWRkVG9DYXJ0XT1cImVuYWJsZUFkZFRvQ2FydCQgfCBhc3luY1wiXG4gICAgICBbYnV5SXRBZ2FpblRyYW5zbGF0aW9uXT1cIidhZGRUb0NhcnQuYnV5SXRBZ2FpbicgfCBjeFRyYW5zbGF0ZVwiXG4gICAgPjwvY3gtb3JkZXItY29uc2lnbmVkLWVudHJpZXM+XG5cbiAgICA8IS0tIGRlbGl2ZXJ5IGNvbnNpZ25tZW50IGFkZHJlc3MgYW5kIGRlbGl2ZXJ5IG1vZGUgLS0+XG4gICAgPG5nLXRlbXBsYXRlXG4gICAgICAqbmdJZj1cIlxuICAgICAgICBkZWxpdmVyeUNvbnNpZ25tZW50cyAmJlxuICAgICAgICBkZWxpdmVyeUNvbnNpZ25tZW50cy5sZW5ndGggPiAwICYmXG4gICAgICAgIChncm91cENhcnRJdGVtcyQgfCBhc3luYylcbiAgICAgIFwiXG4gICAgICBbY3hPdXRsZXRdPVwiT3JkZXJPdXRsZXRzLkNPTlNJR05NRU5UX0RFTElWRVJZX0lORk9cIlxuICAgICAgW2N4T3V0bGV0Q29udGV4dF09XCJ7XG4gICAgICAgIHNob3dJdGVtTGlzdDogZmFsc2UsXG4gICAgICAgIG9yZGVyOiBvcmRlclxuICAgICAgfVwiXG4gICAgPlxuICAgIDwvbmctdGVtcGxhdGU+XG5cbiAgICA8IS0tIGRlbGl2ZXJ5IGNvbnNpZ25lZCBlbnRyaWVzIC0tPlxuICAgIDxjeC1vcmRlci1jb25zaWduZWQtZW50cmllc1xuICAgICAgKm5nSWY9XCJkZWxpdmVyeUNvbnNpZ25tZW50c1wiXG4gICAgICBbb3JkZXJdPVwib3JkZXJcIlxuICAgICAgW2NvbnNpZ25tZW50c109XCJkZWxpdmVyeUNvbnNpZ25tZW50c1wiXG4gICAgICBbZW5hYmxlQWRkVG9DYXJ0XT1cImVuYWJsZUFkZFRvQ2FydCQgfCBhc3luY1wiXG4gICAgICBbYnV5SXRBZ2FpblRyYW5zbGF0aW9uXT1cIidhZGRUb0NhcnQuYnV5SXRBZ2FpbicgfCBjeFRyYW5zbGF0ZVwiXG4gICAgPjwvY3gtb3JkZXItY29uc2lnbmVkLWVudHJpZXM+XG5cbiAgICA8IS0tIHVuY29uc2lnbmVkIGVudHJpZXMgLS0+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIm9yZGVyPy51bmNvbnNpZ25lZEVudHJpZXM/Lmxlbmd0aFwiPlxuICAgICAgPGRpdiAqbmdJZj1cIm9yZGVyPy5zdGF0dXNEaXNwbGF5XCIgY2xhc3M9XCJjeC1saXN0LWhlYWRlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtbGlzdC1zdGF0dXNcIj5cbiAgICAgICAgICB7e1xuICAgICAgICAgICAgJ29yZGVyRGV0YWlscy5zdGF0dXNEaXNwbGF5XycgKyBvcmRlcj8uc3RhdHVzRGlzcGxheSB8IGN4VHJhbnNsYXRlXG4gICAgICAgICAgfX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDwhLS0gZGVsaXZlcnkgdW5jb25zaWduZWQgZW50cmllcyAtLT5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJkZWxpdmVyeVVuQ29uc2lnbmVkRW50cmllcz8ubGVuZ3RoXCI+XG4gICAgICAgIDxoMiAqbmdJZj1cImdyb3VwQ2FydEl0ZW1zJCB8IGFzeW5jXCIgY2xhc3M9XCJjeC1yZXZpZXctaGVhZGVyXCI+XG4gICAgICAgICAge3sgJ2NoZWNrb3V0TW9kZS5kZWxpdmVyeUVudHJpZXMnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgPC9oMj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImN4LWxpc3QtaXRlbVwiPlxuICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgW2N4T3V0bGV0XT1cIkNhcnRPdXRsZXRzLkNBUlRfSVRFTV9MSVNUXCJcbiAgICAgICAgICAgIFtjeE91dGxldENvbnRleHRdPVwie1xuICAgICAgICAgICAgICBpdGVtczogZGVsaXZlcnlVbkNvbnNpZ25lZEVudHJpZXMsXG4gICAgICAgICAgICAgIHJlYWRvbmx5OiB0cnVlLFxuICAgICAgICAgICAgICBwcm9tb3Rpb25Mb2NhdGlvbjogcHJvbW90aW9uTG9jYXRpb24sXG4gICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5QWRkVG9DYXJ0OiBlbmFibGVBZGRUb0NhcnQkIHwgYXN5bmMsXG4gICAgICAgICAgICAgICAgYWRkVG9DYXJ0U3RyaW5nOiAnYWRkVG9DYXJ0LmJ1eUl0QWdhaW4nIHwgY3hUcmFuc2xhdGUsXG4gICAgICAgICAgICAgICAgb3B0aW9uYWxCdG46IGFkZFRvQ2FydEJ0blxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgIDwhLS0gcGlja3VwIHVuY29uc2lnbmVkIGVudHJpZXMsIGIyYiBkb2VzIG5vdCBoYXZlIHBpY2t1cCBpdGVtcyAtLT5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJwaWNrdXBVbmNvbnNpZ25lZEVudHJpZXM/Lmxlbmd0aFwiPlxuICAgICAgICA8aDIgY2xhc3M9XCJjeC1yZXZpZXctaGVhZGVyXCI+XG4gICAgICAgICAge3sgJ2NoZWNrb3V0UGlja3VwSW5TdG9yZS5oZWFkaW5nJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgIDwvaDI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjeC1saXN0LWl0ZW1cIj5cbiAgICAgICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgICAgIFtjeE91dGxldF09XCJDYXJ0T3V0bGV0cy5DQVJUX0lURU1fTElTVFwiXG4gICAgICAgICAgICBbY3hPdXRsZXRDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgaXRlbXM6IHBpY2t1cFVuY29uc2lnbmVkRW50cmllcyxcbiAgICAgICAgICAgICAgcmVhZG9ubHk6IHRydWUsXG4gICAgICAgICAgICAgIHByb21vdGlvbkxvY2F0aW9uOiBwcm9tb3Rpb25Mb2NhdGlvbixcbiAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlBZGRUb0NhcnQ6IGVuYWJsZUFkZFRvQ2FydCQgfCBhc3luYyxcbiAgICAgICAgICAgICAgICBhZGRUb0NhcnRTdHJpbmc6ICdhZGRUb0NhcnQuYnV5SXRBZ2FpbicgfCBjeFRyYW5zbGF0ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25hbEJ0bjogYWRkVG9DYXJ0QnRuXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cIlxuICAgICAgICAgID5cbiAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgPCEtLSByZXBsZW5pc2htZW50IG90aGVyIGVudHJpZXMgLS0+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIm9yZGVyPy5lbnRyaWVzICYmIG9yZGVyPy5yZXBsZW5pc2htZW50T3JkZXJDb2RlXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY3gtbGlzdFwiPlxuICAgICAgICA8ZGl2ICpuZ0lmPVwib3JkZXI/LnN0YXR1c0Rpc3BsYXlcIiBjbGFzcz1cImN4LWxpc3QtaGVhZGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImN4LWxpc3Qtc3RhdHVzXCI+XG4gICAgICAgICAgICB7e1xuICAgICAgICAgICAgICAnb3JkZXJEZXRhaWxzLnN0YXR1c0Rpc3BsYXlfJyArIG9yZGVyPy5zdGF0dXNEaXNwbGF5IHwgY3hUcmFuc2xhdGVcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtbGlzdC1pdGVtXCI+XG4gICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICBbY3hPdXRsZXRdPVwiQ2FydE91dGxldHMuQ0FSVF9JVEVNX0xJU1RcIlxuICAgICAgICAgICAgW2N4T3V0bGV0Q29udGV4dF09XCJ7XG4gICAgICAgICAgICAgIGl0ZW1zOiBvcmRlci5lbnRyaWVzLFxuICAgICAgICAgICAgICByZWFkb25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgcHJvbW90aW9uTG9jYXRpb246IHByb21vdGlvbkxvY2F0aW9uLFxuICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgZGlzcGxheUFkZFRvQ2FydDogZW5hYmxlQWRkVG9DYXJ0JCB8IGFzeW5jLFxuICAgICAgICAgICAgICAgIGFkZFRvQ2FydFN0cmluZzogJ2FkZFRvQ2FydC5idXlJdEFnYWluJyB8IGN4VHJhbnNsYXRlLFxuICAgICAgICAgICAgICAgIG9wdGlvbmFsQnRuOiBhZGRUb0NhcnRCdG5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVwiXG4gICAgICAgICAgPlxuICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9uZy1jb250YWluZXI+XG4gIDwvbmctY29udGFpbmVyPlxuXG4gIDxuZy10ZW1wbGF0ZSBsZXQtY3R4ICNhZGRUb0NhcnRCdG4+XG4gICAgPGN4LWFkZC10by1jYXJ0XG4gICAgICBbcHJvZHVjdENvZGVdPVwiY3R4Lml0ZW0ucHJvZHVjdD8uY29kZVwiXG4gICAgICBbcHJvZHVjdF09XCJjdHguaXRlbS5wcm9kdWN0XCJcbiAgICAgIFtzaG93UXVhbnRpdHldPVwiZmFsc2VcIlxuICAgICAgW29wdGlvbnNdPVwiY3R4Lm9wdGlvbnNcIlxuICAgICAgW3BpY2t1cFN0b3JlXT1cImN0eC5pdGVtLmRlbGl2ZXJ5UG9pbnRPZlNlcnZpY2U/Lm5hbWVcIlxuICAgICAgY2xhc3M9XCJhZGQtdG8tY2FydFwiXG4gICAgPlxuICAgIDwvY3gtYWRkLXRvLWNhcnQ+XG4gIDwvbmctdGVtcGxhdGU+XG48L25nLWNvbnRhaW5lcj5cbiJdfQ==