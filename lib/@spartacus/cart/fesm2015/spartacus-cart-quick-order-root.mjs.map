{"version":3,"file":"spartacus-cart-quick-order-root.mjs","sources":["../../../feature-libs/cart/quick-order/root/config/default-quick-order.config.ts","../../../feature-libs/cart/quick-order/root/config/quick-order-config.ts","../../../feature-libs/cart/quick-order/root/config/index.ts","../../../feature-libs/cart/quick-order/root/feature-name.ts","../../../feature-libs/cart/quick-order/root/facade/quick-order.facade.ts","../../../feature-libs/cart/quick-order/root/facade/index.ts","../../../feature-libs/cart/quick-order/root/models/index.ts","../../../feature-libs/cart/quick-order/root/tokens/context.ts","../../../feature-libs/cart/quick-order/root/quick-order-root.module.ts","../../../feature-libs/cart/quick-order/root/tokens/index.ts","../../../feature-libs/cart/quick-order/root/public_api.ts","../../../feature-libs/cart/quick-order/root/spartacus-cart-quick-order-root.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { QuickOrderConfig } from './quick-order-config';\n\nexport const defaultQuickOrderConfig: QuickOrderConfig = {\n  quickOrder: {\n    searchForm: {\n      displayProductImages: true,\n      maxProducts: 5,\n      minCharactersBeforeRequest: 3,\n    },\n    list: {\n      hardDeleteTimeout: 7000,\n    },\n  },\n};\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class QuickOrderConfig {\n  quickOrder?: {\n    searchForm?: {\n      displayProductImages: boolean;\n      maxProducts: number;\n      minCharactersBeforeRequest: number;\n    };\n    list?: {\n      hardDeleteTimeout: number;\n    };\n  };\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends QuickOrderConfig {}\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './default-quick-order.config';\nexport * from './quick-order-config';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const CART_QUICK_ORDER_FEATURE = 'cartQuickOrder';\nexport const CART_QUICK_ORDER_CORE_FEATURE = 'cartQuickOrderCore';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { OrderEntry, ProductData } from '@spartacus/cart/base/root';\nimport { facadeFactory, Product } from '@spartacus/core';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { CART_QUICK_ORDER_CORE_FEATURE } from '../feature-name';\nimport { QuickOrderAddEntryEvent } from '../models/quick-order.model';\n\nexport function quickOrderFacadeFactory() {\n  return facadeFactory({\n    facade: QuickOrderFacade,\n    feature: CART_QUICK_ORDER_CORE_FEATURE,\n    methods: [\n      'addProduct',\n      'addToCart',\n      'clearList',\n      'canAdd',\n      'setListLimit',\n      'getEntries',\n      'getProductAdded',\n      'loadEntries',\n      'softDeleteEntry',\n      'searchProducts',\n      'setProductAdded',\n      'updateEntryQuantity',\n      'getSoftDeletedEntries',\n      'restoreSoftDeletedEntry',\n      'hardDeleteEntry',\n      'clearDeletedEntries',\n      'getNonPurchasableProductError',\n      'setNonPurchasableProductError',\n      'clearNonPurchasableProductError',\n    ],\n  });\n}\n\n@Injectable({\n  providedIn: 'root',\n  useFactory: quickOrderFacadeFactory,\n})\nexport abstract class QuickOrderFacade {\n  /**\n   * Get entries\n   */\n  abstract getEntries(): BehaviorSubject<OrderEntry[]>;\n\n  /**\n   * Search products using query\n   */\n  abstract searchProducts(\n    query: string,\n    maxProducts?: number\n  ): Observable<Product[]>;\n\n  /**\n   * Clear a list of added entries\n   */\n  abstract clearList(): void;\n\n  /**\n   * Get information about the possibility to add the next product\n   */\n  abstract canAdd(\n    code?: string,\n    productsData?: ProductData[]\n  ): Observable<boolean>;\n\n  /**\n   * Set quick order list limit property\n   */\n  abstract setListLimit(limit: number): void;\n\n  /**\n   * Load a list of entries\n   */\n  abstract loadEntries(entries: OrderEntry[]): void;\n\n  /**\n   * Load a list of entries\n   */\n  abstract updateEntryQuantity(entryIndex: number, quantity: number): void;\n\n  /**\n   * Delete single entry from the list\n   */\n  abstract softDeleteEntry(index: number): void;\n\n  /**\n   * Add product to the quick order list\n   */\n  abstract addProduct(product: Product, quantity?: number): void;\n\n  /**\n   * Return product added subject\n   */\n  abstract getProductAdded(): Subject<string>;\n\n  /**\n   * Set product added subject\n   */\n  abstract setProductAdded(productCode: string): void;\n\n  /**\n   * Adding to cart all products from the list\n   */\n  abstract addToCart(): Observable<[OrderEntry[], QuickOrderAddEntryEvent[]]>;\n\n  /**\n   * Return soft deleted entries\n   */\n  abstract getSoftDeletedEntries(): Observable<Record<string, OrderEntry>>;\n\n  /**\n   * Restore soft deleted entry\n   */\n  abstract restoreSoftDeletedEntry(productCode: string): void;\n\n  /**\n   * Clear deleted entry from the list\n   */\n  abstract hardDeleteEntry(productCode: string): void;\n\n  /**\n   * Clear all deleted entries and timeout subscriptions\n   */\n  abstract clearDeletedEntries(): void;\n\n  /**\n   *  Return non purchasable product error\n   */\n  abstract getNonPurchasableProductError(): Observable<Product | null>;\n\n  /**\n   * Set error that selected product is not purchasable\n   */\n  abstract setNonPurchasableProductError(product: Product): void;\n\n  /**\n   * Clear not purchasable product error\n   */\n  abstract clearNonPurchasableProductError(): void;\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './quick-order.facade';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './quick-order.model';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { InjectionToken } from '@angular/core';\n\nexport const QuickOrderOrderEntriesContextToken = new InjectionToken(\n  'QuickOrderOrderEntriesContext'\n);\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { ORDER_ENTRIES_CONTEXT } from '@spartacus/cart/base/root';\nimport {\n  provideDefaultConfig,\n  provideDefaultConfigFactory,\n  RoutingConfig,\n} from '@spartacus/core';\nimport { CmsPageGuard, PageLayoutComponent } from '@spartacus/storefront';\nimport { defaultQuickOrderConfig } from './config/default-quick-order.config';\nimport {\n  CART_QUICK_ORDER_CORE_FEATURE,\n  CART_QUICK_ORDER_FEATURE,\n} from './feature-name';\nimport { QuickOrderOrderEntriesContextToken } from './tokens/context';\n\nexport function defaultQuickOrderComponentsConfig() {\n  const config = {\n    featureModules: {\n      [CART_QUICK_ORDER_FEATURE]: {\n        cmsComponents: ['QuickOrderComponent', 'CartQuickOrderFormComponent'],\n      },\n      // by default core is bundled together with components\n      [CART_QUICK_ORDER_CORE_FEATURE]: CART_QUICK_ORDER_FEATURE,\n    },\n  };\n  return config;\n}\n\nexport const defaultQuickOrderRoutingConfig: RoutingConfig = {\n  routing: {\n    routes: {\n      quickOrder: {\n        paths: ['my-account/quick-order'],\n      },\n    },\n  },\n};\n\n@NgModule({\n  imports: [\n    RouterModule.forChild([\n      {\n        // @ts-ignore\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: {\n          cxRoute: 'quickOrder',\n          cxContext: {\n            [ORDER_ENTRIES_CONTEXT]: QuickOrderOrderEntriesContextToken,\n          },\n        },\n      },\n    ]),\n  ],\n  providers: [\n    provideDefaultConfigFactory(defaultQuickOrderComponentsConfig),\n    provideDefaultConfig(defaultQuickOrderRoutingConfig),\n    provideDefaultConfig(defaultQuickOrderConfig),\n  ],\n})\nexport class QuickOrderRootModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './context';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './config/index';\nexport * from './facade/index';\nexport * from './feature-name';\nexport * from './models/index';\nexport * from './quick-order-root.module';\nexport * from './tokens/index';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}