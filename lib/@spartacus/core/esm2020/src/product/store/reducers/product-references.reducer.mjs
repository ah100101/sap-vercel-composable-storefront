/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ProductActions } from '../actions/index';
export const initialState = {
    productCode: '',
    list: [],
};
export function reducer(state = initialState, action) {
    switch (action.type) {
        case ProductActions.LOAD_PRODUCT_REFERENCES_SUCCESS: {
            const productCode = action.payload.productCode;
            const list = action.payload.list;
            return {
                ...state,
                list: [...state.list, ...(list ? list : [])].reduce((productReferences, productReference) => {
                    if (!productReferences.some((obj) => obj.referenceType === productReference.referenceType &&
                        obj.target?.code === productReference.target?.code)) {
                        productReferences.push(productReference);
                    }
                    return productReferences;
                }, []),
                productCode,
            };
        }
        case ProductActions.CLEAN_PRODUCT_REFERENCES: {
            return initialState;
        }
    }
    return state;
}
export const getProductReferenceList = (state) => state.list;
export const getProductReferenceProductCode = (state) => state.productCode;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdC1yZWZlcmVuY2VzLnJlZHVjZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb3JlL3NyYy9wcm9kdWN0L3N0b3JlL3JlZHVjZXJzL3Byb2R1Y3QtcmVmZXJlbmNlcy5yZWR1Y2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFHSCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFHbEQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUEyQjtJQUNsRCxXQUFXLEVBQUUsRUFBRTtJQUNmLElBQUksRUFBRSxFQUFFO0NBQ1QsQ0FBQztBQUVGLE1BQU0sVUFBVSxPQUFPLENBQ3JCLEtBQUssR0FBRyxZQUFZLEVBQ3BCLE1BQThDO0lBRTlDLFFBQVEsTUFBTSxDQUFDLElBQUksRUFBRTtRQUNuQixLQUFLLGNBQWMsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO1lBQ25ELE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO1lBQy9DLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBRWpDLE9BQU87Z0JBQ0wsR0FBRyxLQUFLO2dCQUNSLElBQUksRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUNqRCxDQUNFLGlCQUFxQyxFQUNyQyxnQkFBa0MsRUFDbEMsRUFBRTtvQkFDRixJQUNFLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUNyQixDQUFDLEdBQUcsRUFBRSxFQUFFLENBQ04sR0FBRyxDQUFDLGFBQWEsS0FBSyxnQkFBZ0IsQ0FBQyxhQUFhO3dCQUNwRCxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksS0FBSyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUNyRCxFQUNEO3dCQUNBLGlCQUFpQixDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO3FCQUMxQztvQkFDRCxPQUFPLGlCQUFpQixDQUFDO2dCQUMzQixDQUFDLEVBQ0QsRUFBRSxDQUNIO2dCQUNELFdBQVc7YUFDWixDQUFDO1NBQ0g7UUFFRCxLQUFLLGNBQWMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1lBQzVDLE9BQU8sWUFBWSxDQUFDO1NBQ3JCO0tBQ0Y7SUFFRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSx1QkFBdUIsR0FBRyxDQUNyQyxLQUE2QixFQUNULEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO0FBQ3BDLE1BQU0sQ0FBQyxNQUFNLDhCQUE4QixHQUFHLENBQzVDLEtBQTZCLEVBQ3JCLEVBQUUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjMgU0FQIFNwYXJ0YWN1cyB0ZWFtIDxzcGFydGFjdXMtdGVhbUBzYXAuY29tPlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgUHJvZHVjdFJlZmVyZW5jZSB9IGZyb20gJy4uLy4uLy4uL21vZGVsL3Byb2R1Y3QubW9kZWwnO1xuaW1wb3J0IHsgUHJvZHVjdEFjdGlvbnMgfSBmcm9tICcuLi9hY3Rpb25zL2luZGV4JztcbmltcG9ydCB7IFByb2R1Y3RSZWZlcmVuY2VzU3RhdGUgfSBmcm9tICcuLi9wcm9kdWN0LXN0YXRlJztcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxTdGF0ZTogUHJvZHVjdFJlZmVyZW5jZXNTdGF0ZSA9IHtcbiAgcHJvZHVjdENvZGU6ICcnLFxuICBsaXN0OiBbXSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VyKFxuICBzdGF0ZSA9IGluaXRpYWxTdGF0ZSxcbiAgYWN0aW9uOiBQcm9kdWN0QWN0aW9ucy5Qcm9kdWN0UmVmZXJlbmNlc0FjdGlvblxuKTogUHJvZHVjdFJlZmVyZW5jZXNTdGF0ZSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIFByb2R1Y3RBY3Rpb25zLkxPQURfUFJPRFVDVF9SRUZFUkVOQ0VTX1NVQ0NFU1M6IHtcbiAgICAgIGNvbnN0IHByb2R1Y3RDb2RlID0gYWN0aW9uLnBheWxvYWQucHJvZHVjdENvZGU7XG4gICAgICBjb25zdCBsaXN0ID0gYWN0aW9uLnBheWxvYWQubGlzdDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGxpc3Q6IFsuLi5zdGF0ZS5saXN0LCAuLi4obGlzdCA/IGxpc3QgOiBbXSldLnJlZHVjZShcbiAgICAgICAgICAoXG4gICAgICAgICAgICBwcm9kdWN0UmVmZXJlbmNlczogUHJvZHVjdFJlZmVyZW5jZVtdLFxuICAgICAgICAgICAgcHJvZHVjdFJlZmVyZW5jZTogUHJvZHVjdFJlZmVyZW5jZVxuICAgICAgICAgICkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhcHJvZHVjdFJlZmVyZW5jZXMuc29tZShcbiAgICAgICAgICAgICAgICAob2JqKSA9PlxuICAgICAgICAgICAgICAgICAgb2JqLnJlZmVyZW5jZVR5cGUgPT09IHByb2R1Y3RSZWZlcmVuY2UucmVmZXJlbmNlVHlwZSAmJlxuICAgICAgICAgICAgICAgICAgb2JqLnRhcmdldD8uY29kZSA9PT0gcHJvZHVjdFJlZmVyZW5jZS50YXJnZXQ/LmNvZGVcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHByb2R1Y3RSZWZlcmVuY2VzLnB1c2gocHJvZHVjdFJlZmVyZW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvZHVjdFJlZmVyZW5jZXM7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBbXVxuICAgICAgICApLFxuICAgICAgICBwcm9kdWN0Q29kZSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY2FzZSBQcm9kdWN0QWN0aW9ucy5DTEVBTl9QUk9EVUNUX1JFRkVSRU5DRVM6IHtcbiAgICAgIHJldHVybiBpbml0aWFsU3RhdGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0YXRlO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0UHJvZHVjdFJlZmVyZW5jZUxpc3QgPSAoXG4gIHN0YXRlOiBQcm9kdWN0UmVmZXJlbmNlc1N0YXRlXG4pOiBQcm9kdWN0UmVmZXJlbmNlW10gPT4gc3RhdGUubGlzdDtcbmV4cG9ydCBjb25zdCBnZXRQcm9kdWN0UmVmZXJlbmNlUHJvZHVjdENvZGUgPSAoXG4gIHN0YXRlOiBQcm9kdWN0UmVmZXJlbmNlc1N0YXRlXG4pOiBzdHJpbmcgPT4gc3RhdGUucHJvZHVjdENvZGU7XG4iXX0=