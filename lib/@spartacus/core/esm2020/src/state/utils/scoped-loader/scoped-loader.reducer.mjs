/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { loaderReducer } from '../loader/loader.reducer';
export const initialScopedLoaderState = {};
/**
 * Higher order reducer designed to add scope support for loader reducer
 *
 * @param entityType
 * @param reducer
 */
export function scopedLoaderReducer(entityType, reducer) {
    const loader = loaderReducer(entityType, reducer);
    return (state = initialScopedLoaderState, action) => {
        if (action && action.meta && action.meta.entityType === entityType) {
            return {
                ...state,
                [action.meta.scope ?? '']: loader(state[action.meta.scope ?? ''], action),
            };
        }
        return state;
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGVkLWxvYWRlci5yZWR1Y2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29yZS9zcmMvc3RhdGUvdXRpbHMvc2NvcGVkLWxvYWRlci9zY29wZWQtbG9hZGVyLnJlZHVjZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUlILE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUd6RCxNQUFNLENBQUMsTUFBTSx3QkFBd0IsR0FBMkIsRUFBRSxDQUFDO0FBRW5FOzs7OztHQUtHO0FBQ0gsTUFBTSxVQUFVLG1CQUFtQixDQUNqQyxVQUFrQixFQUNsQixPQUFxRDtJQUtyRCxNQUFNLE1BQU0sR0FBRyxhQUFhLENBQUksVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRXJELE9BQU8sQ0FDTCxRQUE4Qix3QkFBd0IsRUFDdEQsTUFBZ0MsRUFDVixFQUFFO1FBQ3hCLElBQUksTUFBTSxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEtBQUssVUFBVSxFQUFFO1lBQ2xFLE9BQU87Z0JBQ0wsR0FBRyxLQUFLO2dCQUNSLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUMvQixLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLEVBQzlCLE1BQU0sQ0FDUDthQUNGLENBQUM7U0FDSDtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJ0BuZ3J4L3N0b3JlJztcbmltcG9ydCB7IEVudGl0eVNjb3BlZExvYWRlckFjdGlvbiB9IGZyb20gJy4uLy4uLy4uL3Byb2R1Y3Qvc3RvcmUvYWN0aW9ucy9wcm9kdWN0LmFjdGlvbic7XG5pbXBvcnQgeyBsb2FkZXJSZWR1Y2VyIH0gZnJvbSAnLi4vbG9hZGVyL2xvYWRlci5yZWR1Y2VyJztcbmltcG9ydCB7IFNjb3BlZExvYWRlclN0YXRlIH0gZnJvbSAnLi9zY29wZWQtbG9hZGVyLnN0YXRlJztcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxTY29wZWRMb2FkZXJTdGF0ZTogU2NvcGVkTG9hZGVyU3RhdGU8YW55PiA9IHt9O1xuXG4vKipcbiAqIEhpZ2hlciBvcmRlciByZWR1Y2VyIGRlc2lnbmVkIHRvIGFkZCBzY29wZSBzdXBwb3J0IGZvciBsb2FkZXIgcmVkdWNlclxuICpcbiAqIEBwYXJhbSBlbnRpdHlUeXBlXG4gKiBAcGFyYW0gcmVkdWNlclxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NvcGVkTG9hZGVyUmVkdWNlcjxUPihcbiAgZW50aXR5VHlwZTogc3RyaW5nLFxuICByZWR1Y2VyPzogKHN0YXRlOiBUIHwgdW5kZWZpbmVkLCBhY3Rpb246IEFjdGlvbikgPT4gVFxuKTogKFxuICBzdGF0ZTogU2NvcGVkTG9hZGVyU3RhdGU8VD4sXG4gIGFjdGlvbjogRW50aXR5U2NvcGVkTG9hZGVyQWN0aW9uXG4pID0+IFNjb3BlZExvYWRlclN0YXRlPFQ+IHtcbiAgY29uc3QgbG9hZGVyID0gbG9hZGVyUmVkdWNlcjxUPihlbnRpdHlUeXBlLCByZWR1Y2VyKTtcblxuICByZXR1cm4gKFxuICAgIHN0YXRlOiBTY29wZWRMb2FkZXJTdGF0ZTxUPiA9IGluaXRpYWxTY29wZWRMb2FkZXJTdGF0ZSxcbiAgICBhY3Rpb246IEVudGl0eVNjb3BlZExvYWRlckFjdGlvblxuICApOiBTY29wZWRMb2FkZXJTdGF0ZTxUPiA9PiB7XG4gICAgaWYgKGFjdGlvbiAmJiBhY3Rpb24ubWV0YSAmJiBhY3Rpb24ubWV0YS5lbnRpdHlUeXBlID09PSBlbnRpdHlUeXBlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgW2FjdGlvbi5tZXRhLnNjb3BlID8/ICcnXTogbG9hZGVyKFxuICAgICAgICAgIHN0YXRlW2FjdGlvbi5tZXRhLnNjb3BlID8/ICcnXSxcbiAgICAgICAgICBhY3Rpb25cbiAgICAgICAgKSxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzdGF0ZTtcbiAgfTtcbn1cbiJdfQ==