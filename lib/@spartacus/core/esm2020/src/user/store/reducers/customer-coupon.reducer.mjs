/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import * as fromActions from '../actions/customer-coupon.action';
export const initialState = {
    coupons: [],
    sorts: [],
    pagination: {},
};
export function reducer(state = initialState, action) {
    switch (action.type) {
        case fromActions.LOAD_CUSTOMER_COUPONS_SUCCESS: {
            return action.payload;
        }
        case fromActions.SUBSCRIBE_CUSTOMER_COUPON_SUCCESS: {
            const updatedCustomerCoupon = action.payload.coupon;
            const customerCoupons = new Array(state.coupons?.length ?? 0);
            state.coupons?.forEach((customerCoupon, index) => updatedCustomerCoupon &&
                customerCoupon.couponId === updatedCustomerCoupon.couponId
                ? (customerCoupons[index] = updatedCustomerCoupon)
                : (customerCoupons[index] = customerCoupon));
            return { ...state, coupons: customerCoupons };
        }
        case fromActions.UNSUBSCRIBE_CUSTOMER_COUPON_SUCCESS: {
            const updatedCouponCode = action.payload;
            const customerCoupons = new Array(state.coupons?.length ?? 0);
            state.coupons?.forEach((customerCoupon, index) => customerCoupon.couponId === updatedCouponCode
                ? (customerCoupons[index] = {
                    ...customerCoupon,
                    notificationOn: false,
                })
                : (customerCoupons[index] = customerCoupon));
            return { ...state, coupons: customerCoupons };
        }
    }
    return state;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tZXItY291cG9uLnJlZHVjZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb3JlL3NyYy91c2VyL3N0b3JlL3JlZHVjZXJzL2N1c3RvbWVyLWNvdXBvbi5yZWR1Y2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFNSCxPQUFPLEtBQUssV0FBVyxNQUFNLG1DQUFtQyxDQUFDO0FBRWpFLE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBK0I7SUFDdEQsT0FBTyxFQUFFLEVBQUU7SUFDWCxLQUFLLEVBQUUsRUFBRTtJQUNULFVBQVUsRUFBRSxFQUFFO0NBQ2YsQ0FBQztBQUNGLE1BQU0sVUFBVSxPQUFPLENBQ3JCLEtBQUssR0FBRyxZQUFZLEVBQ3BCLE1BQXdDO0lBRXhDLFFBQVEsTUFBTSxDQUFDLElBQUksRUFBRTtRQUNuQixLQUFLLFdBQVcsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO1lBQzlDLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQztTQUN2QjtRQUVELEtBQUssV0FBVyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7WUFDbEQsTUFBTSxxQkFBcUIsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztZQUNwRCxNQUFNLGVBQWUsR0FBRyxJQUFJLEtBQUssQ0FDL0IsS0FBSyxDQUFDLE9BQU8sRUFBRSxNQUFNLElBQUksQ0FBQyxDQUMzQixDQUFDO1lBQ0YsS0FBSyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxjQUE4QixFQUFFLEtBQUssRUFBRSxFQUFFLENBQy9ELHFCQUFxQjtnQkFDckIsY0FBYyxDQUFDLFFBQVEsS0FBSyxxQkFBcUIsQ0FBQyxRQUFRO2dCQUN4RCxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLEdBQUcscUJBQXFCLENBQUM7Z0JBQ2xELENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsR0FBRyxjQUFjLENBQUMsQ0FDOUMsQ0FBQztZQUNGLE9BQU8sRUFBRSxHQUFHLEtBQUssRUFBRSxPQUFPLEVBQUUsZUFBZSxFQUFFLENBQUM7U0FDL0M7UUFFRCxLQUFLLFdBQVcsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO1lBQ3BELE1BQU0saUJBQWlCLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztZQUN6QyxNQUFNLGVBQWUsR0FBRyxJQUFJLEtBQUssQ0FDL0IsS0FBSyxDQUFDLE9BQU8sRUFBRSxNQUFNLElBQUksQ0FBQyxDQUMzQixDQUFDO1lBQ0YsS0FBSyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxjQUE4QixFQUFFLEtBQUssRUFBRSxFQUFFLENBQy9ELGNBQWMsQ0FBQyxRQUFRLEtBQUssaUJBQWlCO2dCQUMzQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLEdBQUc7b0JBQ3hCLEdBQUcsY0FBYztvQkFDakIsY0FBYyxFQUFFLEtBQUs7aUJBQ3RCLENBQUM7Z0JBQ0osQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxHQUFHLGNBQWMsQ0FBQyxDQUM5QyxDQUFDO1lBQ0YsT0FBTyxFQUFFLEdBQUcsS0FBSyxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsQ0FBQztTQUMvQztLQUNGO0lBQ0QsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjMgU0FQIFNwYXJ0YWN1cyB0ZWFtIDxzcGFydGFjdXMtdGVhbUBzYXAuY29tPlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHtcbiAgQ3VzdG9tZXJDb3Vwb24sXG4gIEN1c3RvbWVyQ291cG9uU2VhcmNoUmVzdWx0LFxufSBmcm9tICcuLi8uLi8uLi9tb2RlbC9jdXN0b21lci1jb3Vwb24ubW9kZWwnO1xuaW1wb3J0ICogYXMgZnJvbUFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9jdXN0b21lci1jb3Vwb24uYWN0aW9uJztcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxTdGF0ZTogQ3VzdG9tZXJDb3Vwb25TZWFyY2hSZXN1bHQgPSB7XG4gIGNvdXBvbnM6IFtdLFxuICBzb3J0czogW10sXG4gIHBhZ2luYXRpb246IHt9LFxufTtcbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VyKFxuICBzdGF0ZSA9IGluaXRpYWxTdGF0ZSxcbiAgYWN0aW9uOiBmcm9tQWN0aW9ucy5DdXN0b21lckNvdXBvbkFjdGlvblxuKTogQ3VzdG9tZXJDb3Vwb25TZWFyY2hSZXN1bHQge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBmcm9tQWN0aW9ucy5MT0FEX0NVU1RPTUVSX0NPVVBPTlNfU1VDQ0VTUzoge1xuICAgICAgcmV0dXJuIGFjdGlvbi5wYXlsb2FkO1xuICAgIH1cblxuICAgIGNhc2UgZnJvbUFjdGlvbnMuU1VCU0NSSUJFX0NVU1RPTUVSX0NPVVBPTl9TVUNDRVNTOiB7XG4gICAgICBjb25zdCB1cGRhdGVkQ3VzdG9tZXJDb3Vwb24gPSBhY3Rpb24ucGF5bG9hZC5jb3Vwb247XG4gICAgICBjb25zdCBjdXN0b21lckNvdXBvbnMgPSBuZXcgQXJyYXk8Q3VzdG9tZXJDb3Vwb24+KFxuICAgICAgICBzdGF0ZS5jb3Vwb25zPy5sZW5ndGggPz8gMFxuICAgICAgKTtcbiAgICAgIHN0YXRlLmNvdXBvbnM/LmZvckVhY2goKGN1c3RvbWVyQ291cG9uOiBDdXN0b21lckNvdXBvbiwgaW5kZXgpID0+XG4gICAgICAgIHVwZGF0ZWRDdXN0b21lckNvdXBvbiAmJlxuICAgICAgICBjdXN0b21lckNvdXBvbi5jb3Vwb25JZCA9PT0gdXBkYXRlZEN1c3RvbWVyQ291cG9uLmNvdXBvbklkXG4gICAgICAgICAgPyAoY3VzdG9tZXJDb3Vwb25zW2luZGV4XSA9IHVwZGF0ZWRDdXN0b21lckNvdXBvbilcbiAgICAgICAgICA6IChjdXN0b21lckNvdXBvbnNbaW5kZXhdID0gY3VzdG9tZXJDb3Vwb24pXG4gICAgICApO1xuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGNvdXBvbnM6IGN1c3RvbWVyQ291cG9ucyB9O1xuICAgIH1cblxuICAgIGNhc2UgZnJvbUFjdGlvbnMuVU5TVUJTQ1JJQkVfQ1VTVE9NRVJfQ09VUE9OX1NVQ0NFU1M6IHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb3Vwb25Db2RlID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICBjb25zdCBjdXN0b21lckNvdXBvbnMgPSBuZXcgQXJyYXk8Q3VzdG9tZXJDb3Vwb24+KFxuICAgICAgICBzdGF0ZS5jb3Vwb25zPy5sZW5ndGggPz8gMFxuICAgICAgKTtcbiAgICAgIHN0YXRlLmNvdXBvbnM/LmZvckVhY2goKGN1c3RvbWVyQ291cG9uOiBDdXN0b21lckNvdXBvbiwgaW5kZXgpID0+XG4gICAgICAgIGN1c3RvbWVyQ291cG9uLmNvdXBvbklkID09PSB1cGRhdGVkQ291cG9uQ29kZVxuICAgICAgICAgID8gKGN1c3RvbWVyQ291cG9uc1tpbmRleF0gPSB7XG4gICAgICAgICAgICAgIC4uLmN1c3RvbWVyQ291cG9uLFxuICAgICAgICAgICAgICBub3RpZmljYXRpb25PbjogZmFsc2UsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogKGN1c3RvbWVyQ291cG9uc1tpbmRleF0gPSBjdXN0b21lckNvdXBvbilcbiAgICAgICk7XG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgY291cG9uczogY3VzdG9tZXJDb3Vwb25zIH07XG4gICAgfVxuICB9XG4gIHJldHVybiBzdGF0ZTtcbn1cbiJdfQ==