/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component, EventEmitter, HostBinding, Input, Output, } from '@angular/core';
import { timer } from 'rxjs';
import { delayWhen } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../split-view.service";
/**
 * The view component is part of the `SplitViewComponent`. The view
 * contains the navigable content that should be split up. It maintains
 * a view position and allows to show or hide the view.
 *
 * The ViewComponent interacts with the `SplitViewService` for handing over the
 * view state, so that the overarching `SplitViewComponent` can manage the
 * overall experience.
 */
export class ViewComponent {
    /**
     * The hidden input is used to set the initial visible state of the view.
     * The hidden state defaults to false.
     *
     * The hidden input supports 2-way binding, see `hiddenChange` property.
     */
    set hidden(hidden) {
        this._hidden = hidden;
        this.splitService.toggle(this.viewPosition, hidden);
    }
    constructor(splitService, elementRef, cd) {
        this.splitService = splitService;
        this.elementRef = elementRef;
        this.cd = cd;
        /**
         * The disappeared flag is added to the
         */
        this.disappeared = true;
        /**
         * An update of the view visibility is emitted to the hiddenChange output.
         */
        this.hiddenChange = new EventEmitter();
    }
    ngOnInit() {
        const hidden = this._hidden ? { hidden: this._hidden } : {};
        this.splitService.add(this.viewPosition, hidden);
        this.subscription = this.splitService
            .getViewState(this.viewPosition)
            // delay the disappeared state, so that the (CSS driven) animation has time to finish
            .pipe(delayWhen((view) => timer(view.hidden ? this.duration * 1.25 : 0)))
            .subscribe((view) => {
            this.hiddenChange.emit(view.hidden);
            this._hidden = view.hidden;
            this.disappeared = view.hidden;
            this.cd.markForCheck();
        });
    }
    /**
     * Toggles the visibility of the view.
     *
     * An optional force flag can be used to explicitly show or hide view component.
     */
    toggle(force) {
        this.splitService.toggle(this.viewPosition, force);
    }
    /**
     * Returns the position for the view.
     *
     * The position is either taken from the input `position` or generated by the `SplitService`.
     */
    get viewPosition() {
        if (!(Number(this.position) >= 0)) {
            this.position = this.splitService.nextPosition.toString();
        }
        return Number(this.position);
    }
    /**
     * Returns the duration in milliseconds. The duration is based on the CSS custom property
     * `--cx-transition-duration`. Defaults to 300 milliseconds.
     */
    get duration() {
        const duration = getComputedStyle(this.elementRef.nativeElement)
            .getPropertyValue('--cx-transition-duration')
            .trim();
        if (duration.indexOf('ms') > -1) {
            return Number(duration.split('ms')[0]);
        }
        else if (duration.indexOf('s') > -1) {
            return Number(duration.split('s')[0]) * 1000;
        }
        else {
            return 300;
        }
    }
    /**
     * The view is removed from the `SplitService` so that the view no longer
     * plays a role in the overall split view.
     */
    ngOnDestroy() {
        this.splitService.remove(this.viewPosition);
        this.subscription?.unsubscribe();
    }
}
ViewComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: ViewComponent, deps: [{ token: i1.SplitViewService }, { token: i0.ElementRef }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
ViewComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.4", type: ViewComponent, selector: "cx-view", inputs: { position: "position", hidden: "hidden" }, outputs: { hiddenChange: "hiddenChange" }, host: { properties: { "attr.position": "this.position", "style.--cx-view-position": "this.position", "attr.disappeared": "this.disappeared" } }, ngImport: i0, template: "<ng-content></ng-content>\n", changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: ViewComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-view', changeDetection: ChangeDetectionStrategy.OnPush, template: "<ng-content></ng-content>\n" }]
        }], ctorParameters: function () { return [{ type: i1.SplitViewService }, { type: i0.ElementRef }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { position: [{
                type: Input
            }, {
                type: HostBinding,
                args: ['attr.position']
            }, {
                type: HostBinding,
                args: ['style.--cx-view-position']
            }], disappeared: [{
                type: HostBinding,
                args: ['attr.disappeared']
            }], hidden: [{
                type: Input
            }], hiddenChange: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlldy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zdG9yZWZyb250bGliL3NoYXJlZC9jb21wb25lbnRzL3NwbGl0LXZpZXcvdmlldy92aWV3LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3N0b3JlZnJvbnRsaWIvc2hhcmVkL2NvbXBvbmVudHMvc3BsaXQtdmlldy92aWV3L3ZpZXcuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFDTCx1QkFBdUIsRUFFdkIsU0FBUyxFQUVULFlBQVksRUFDWixXQUFXLEVBQ1gsS0FBSyxFQUdMLE1BQU0sR0FDUCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQWdCLEtBQUssRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMzQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7OztBQUczQzs7Ozs7Ozs7R0FRRztBQU1ILE1BQU0sT0FBTyxhQUFhO0lBYXhCOzs7OztPQUtHO0lBQ0gsSUFDSSxNQUFNLENBQUMsTUFBZTtRQUN4QixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFVRCxZQUNZLFlBQThCLEVBQzlCLFVBQXNCLEVBQ3RCLEVBQXFCO1FBRnJCLGlCQUFZLEdBQVosWUFBWSxDQUFrQjtRQUM5QixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBNUJqQzs7V0FFRztRQUM4QixnQkFBVyxHQUF3QixJQUFJLENBQUM7UUFjekU7O1dBRUc7UUFFSCxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7SUFRL0IsQ0FBQztJ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QVc7dUJBQUMsMEJBQTBCO2dCQU1OLFdBQVc7c0JBQTNDLFdBQVc7dUJBQUMsa0JBQWtCO2dCQVMzQixNQUFNO3NCQURULEtBQUs7Z0JBVU4sWUFBWTtzQkFEWCxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjMgU0FQIFNwYXJ0YWN1cyB0ZWFtIDxzcGFydGFjdXMtdGVhbUBzYXAuY29tPlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiwgdGltZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRlbGF5V2hlbiB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFNwbGl0Vmlld1NlcnZpY2UgfSBmcm9tICcuLi9zcGxpdC12aWV3LnNlcnZpY2UnO1xuXG4vKipcbiAqIFRoZSB2aWV3IGNvbXBvbmVudCBpcyBwYXJ0IG9mIHRoZSBgU3BsaXRWaWV3Q29tcG9uZW50YC4gVGhlIHZpZXdcbiAqIGNvbnRhaW5zIHRoZSBuYXZpZ2FibGUgY29udGVudCB0aGF0IHNob3VsZCBiZSBzcGxpdCB1cC4gSXQgbWFpbnRhaW5zXG4gKiBhIHZpZXcgcG9zaXRpb24gYW5kIGFsbG93cyB0byBzaG93IG9yIGhpZGUgdGhlIHZpZXcuXG4gKlxuICogVGhlIFZpZXdDb21wb25lbnQgaW50ZXJhY3RzIHdpdGggdGhlIGBTcGxpdFZpZXdTZXJ2aWNlYCBmb3IgaGFuZGluZyBvdmVyIHRoZVxuICogdmlldyBzdGF0ZSwgc28gdGhhdCB0aGUgb3ZlcmFyY2hpbmcgYFNwbGl0Vmlld0NvbXBvbmVudGAgY2FuIG1hbmFnZSB0aGVcbiAqIG92ZXJhbGwgZXhwZXJpZW5jZS5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY3gtdmlldycsXG4gIHRlbXBsYXRlVXJsOiAnLi92aWV3LmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG59KVxuZXhwb3J0IGNsYXNzIFZpZXdDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIHByb3RlY3RlZCBfaGlkZGVuOiBib29sZWFuIHwgdW5kZWZpbmVkO1xuXG4gIEBJbnB1dCgpXG4gIEBIb3N0QmluZGluZygnYXR0ci5wb3NpdGlvbicpXG4gIEBIb3N0QmluZGluZygnc3R5bGUuLS1jeC12aWV3LXBvc2l0aW9uJylcbiAgcG9zaXRpb246IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGRpc2FwcGVhcmVkIGZsYWcgaXMgYWRkZWQgdG8gdGhlXG4gICAqL1xuICBASG9zdEJpbmRpbmcoJ2F0dHIuZGlzYXBwZWFyZWQnKSBkaXNhcHBlYXJlZDogYm9vbGVhbiB8IHVuZGVmaW5lZCA9IHRydWU7XG5cbiAgLyoqXG4gICAqIFRoZSBoaWRkZW4gaW5wdXQgaXMgdXNlZCB0byBzZXQgdGhlIGluaXRpYWwgdmlzaWJsZSBzdGF0ZSBvZiB0aGUgdmlldy5cbiAgICogVGhlIGhpZGRlbiBzdGF0ZSBkZWZhdWx0cyB0byBmYWxzZS5cbiAgICpcbiAgICogVGhlIGhpZGRlbiBpbnB1dCBzdXBwb3J0cyAyLXdheSBiaW5kaW5nLCBzZWUgYGhpZGRlbkNoYW5nZWAgcHJvcGVydHkuXG4gICAqL1xuICBASW5wdXQoKVxuICBzZXQgaGlkZGVuKGhpZGRlbjogYm9vbGVhbikge1xuICAgIHRoaXMuX2hpZGRlbiA9IGhpZGRlbjtcbiAgICB0aGlzLnNwbGl0U2VydmljZS50b2dnbGUodGhpcy52aWV3UG9zaXRpb24sIGhpZGRlbik7XG4gIH1cblxuICAvKipcbiAgICogQW4gdXBkYXRlIG9mIHRoZSB2aWV3IHZpc2liaWxpdHkgaXMgZW1pdHRlZCB0byB0aGUgaGlkZGVuQ2hhbmdlIG91dHB1dC5cbiAgICovXG4gIEBPdXRwdXQoKVxuICBoaWRkZW5DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgcHJvdGVjdGVkIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBzcGxpdFNlcnZpY2U6IFNwbGl0Vmlld1NlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgcHJvdGVjdGVkIGNkOiBDaGFuZ2VEZXRlY3RvclJlZlxuICApIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgY29uc3QgaGlkZGVuID0gdGhpcy5faGlkZGVuID8geyBoaWRkZW46IHRoaXMuX2hpZGRlbiB9IDoge307XG4gICAgdGhpcy5zcGxpdFNlcnZpY2UuYWRkKHRoaXMudmlld1Bvc2l0aW9uLCBoaWRkZW4pO1xuXG4gICAgdGhpcy5zdWJzY3JpcHRpb24gPSB0aGlzLnNwbGl0U2VydmljZVxuICAgICAgLmdldFZpZXdTdGF0ZSh0aGlzLnZpZXdQb3NpdGlvbilcbiAgICAgIC8vIGRlbGF5IHRoZSBkaXNhcHBlYXJlZCBzdGF0ZSwgc28gdGhhdCB0aGUgKENTUyBkcml2ZW4pIGFuaW1hdGlvbiBoYXMgdGltZSB0byBmaW5pc2hcbiAgICAgIC5waXBlKGRlbGF5V2hlbigodmlldykgPT4gdGltZXIodmlldy5oaWRkZW4gPyB0aGlzLmR1cmF0aW9uICogMS4yNSA6IDApKSlcbiAgICAgIC5zdWJzY3JpYmUoKHZpZXcpID0+IHtcbiAgICAgICAgdGhpcy5oaWRkZW5DaGFuZ2UuZW1pdCh2aWV3LmhpZGRlbik7XG4gICAgICAgIHRoaXMuX2hpZGRlbiA9IHZpZXcuaGlkZGVuO1xuXG4gICAgICAgIHRoaXMuZGlzYXBwZWFyZWQgPSB2aWV3LmhpZGRlbjtcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHZpZXcuXG4gICAqXG4gICAqIEFuIG9wdGlvbmFsIGZvcmNlIGZsYWcgY2FuIGJlIHVzZWQgdG8gZXhwbGljaXRseSBzaG93IG9yIGhpZGUgdmlldyBjb21wb25lbnQuXG4gICAqL1xuICB0b2dnbGUoZm9yY2U/OiBib29sZWFuKSB7XG4gICAgdGhpcy5zcGxpdFNlcnZpY2UudG9nZ2xlKHRoaXMudmlld1Bvc2l0aW9uLCBmb3JjZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcG9zaXRpb24gZm9yIHRoZSB2aWV3LlxuICAgKlxuICAgKiBUaGUgcG9zaXRpb24gaXMgZWl0aGVyIHRha2VuIGZyb20gdGhlIGlucHV0IGBwb3NpdGlvbmAgb3IgZ2VuZXJhdGVkIGJ5IHRoZSBgU3BsaXRTZXJ2aWNlYC5cbiAgICovXG4gIHByb3RlY3RlZCBnZXQgdmlld1Bvc2l0aW9uKCk6IG51bWJlciB7XG4gICAgaWYgKCEoTnVtYmVyKHRoaXMucG9zaXRpb24pID49IDApKSB7XG4gICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5zcGxpdFNlcnZpY2UubmV4dFBvc2l0aW9uLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiBOdW1iZXIodGhpcy5wb3NpdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLiBUaGUgZHVyYXRpb24gaXMgYmFzZWQgb24gdGhlIENTUyBjdXN0b20gcHJvcGVydHlcbiAgICogYC0tY3gtdHJhbnNpdGlvbi1kdXJhdGlvbmAuIERlZmF1bHRzIHRvIDMwMCBtaWxsaXNlY29uZHMuXG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0IGR1cmF0aW9uKCk6IG51bWJlciB7XG4gICAgY29uc3QgZHVyYXRpb246IHN0cmluZyA9IGdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpXG4gICAgICAuZ2V0UHJvcGVydHlWYWx1ZSgnLS1jeC10cmFuc2l0aW9uLWR1cmF0aW9uJylcbiAgICAgIC50cmltKCk7XG5cbiAgICBpZiAoZHVyYXRpb24uaW5kZXhPZignbXMnKSA+IC0xKSB7XG4gICAgICByZXR1cm4gTnVtYmVyKGR1cmF0aW9uLnNwbGl0KCdtcycpWzBdKTtcbiAgICB9IGVsc2UgaWYgKGR1cmF0aW9uLmluZGV4T2YoJ3MnKSA+IC0xKSB7XG4gICAgICByZXR1cm4gTnVtYmVyKGR1cmF0aW9uLnNwbGl0KCdzJylbMF0pICogMTAwMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDMwMDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIHZpZXcgaXMgcmVtb3ZlZCBmcm9tIHRoZSBgU3BsaXRTZXJ2aWNlYCBzbyB0aGF0IHRoZSB2aWV3IG5vIGxvbmdlclxuICAgKiBwbGF5cyBhIHJvbGUgaW4gdGhlIG92ZXJhbGwgc3BsaXQgdmlldy5cbiAgICovXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuc3BsaXRTZXJ2aWNlLnJlbW92ZSh0aGlzLnZpZXdQb3NpdGlvbik7XG4gICAgdGhpcy5zdWJzY3JpcHRpb24/LnVuc3Vic2NyaWJlKCk7XG4gIH1cbn1cbiIsIjxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiJdfQ==